<pre class="code">
<span class="srcline"><span class="lineno"><a href="68,1" id="srcline1">  1</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S2T64U3">varargout</span> = mapiPrivate(<span class="mxinfo " id="T67:U2"><span class="var type2" id="S3T67V13U6">cmd</span></span>, <span class="var type1" id="S4T33U7">varargin</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="68,2" id="srcline2">  2</a></span><span class="line"><span class="comment">%#codegen</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,3" id="srcline3">  3</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,4" id="srcline4">  4</a></span><span class="line"><span class="comment">% This function unifies handling of interp vs. codegen call as well as</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,5" id="srcline5">  5</a></span><span class="line"><span class="comment">% errStat / errStr assignment.</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,6" id="srcline6">  6</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,7" id="srcline7">  7</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="68,8" id="srcline8">  8</a></span><span class="line"><span class="comment">%   Copyright 2011-2015 The MathWorks, Inc.</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,9" id="srcline9">  9</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="68,10" id="srcline10"> 10</a></span><span class="line">coder.extrinsic(<span class="string">'setupsdru'</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="68,11" id="srcline11"> 11</a></span><span class="line">coder.extrinsic(<span class="string">'sdruroot'</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="68,12" id="srcline12"> 12</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="68,13" id="srcline13"> 13</a></span><span class="line"><span class="keyword">persistent</span> <span class="var type1" id="S6T4U21">isSetupsdruCalled</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,14" id="srcline14"> 14</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T4:U6"><span class="mxinfo " id="T4:U7">isempty(<span class="var type0" id="S6T0U26">isSetupsdruCalled</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="68,15" id="srcline15"> 15</a></span><span class="line">  <span class="mxinfo " id="T4:U8"><span class="var type1" id="S6T4U29">isSetupsdruCalled</span> = <span class="mxinfo " id="T4:U10">false</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,16" id="srcline16"> 16</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,17" id="srcline17"> 17</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="68,18" id="srcline18"> 18</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T4:U11">~<span class="var type1" id="S6T4U36">isSetupsdruCalled</span></span> &amp;&amp; (isempty(coder.target()) || strcmp(coder.target(), <span class="string">'mex'</span>))</span></span>
<span class="srcline"><span class="lineno"><a href="68,19" id="srcline19"> 19</a></span><span class="line">    <span class="extrinsicFcn" id="F310N88:B54">setupsdru</span>(<span class="extrinsicFcn" id="F309N87:B56">sdruroot</span>, <span class="string">'silent'</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="68,20" id="srcline20"> 20</a></span><span class="line">    <span class="mxinfo " id="T4:U13"><span class="var type1" id="S6T4U60">isSetupsdruCalled</span> = <span class="mxinfo " id="T4:U15">true</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,21" id="srcline21"> 21</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,22" id="srcline22"> 22</a></span><span class="line">  </span></span>
<span class="srcline"><span class="lineno"><a href="68,23" id="srcline23"> 23</a></span><span class="line"><span class="mxinfo " id="T6:U16"><span class="var type1" id="S13T6U65">MAX_STR_SIZE</span>                = <span class="mxinfo " id="T6:U18">128</span></span>;   <span class="comment">% These sizes must match those in C code.</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,24" id="srcline24"> 24</a></span><span class="line"><span class="mxinfo " id="T6:U19"><span class="var type1" id="S14T6U69">MAX_DEV_DESCR_STR_SIZE</span>      = <span class="mxinfo " id="T6:U21">1024</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,25" id="srcline25"> 25</a></span><span class="line"><span class="mxinfo " id="T6:U22"><span class="var type1" id="S15T6U73">MAX_ERROR_MESSAGE_LENGTH</span>    = <span class="mxinfo " id="T6:U24">1024</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,26" id="srcline26"> 26</a></span><span class="line"><span class="mxinfo " id="T6:U25"><span class="var type1" id="S16T6U77">MAX_FRAMELENGTH</span>             = <span class="mxinfo " id="T6:U27"><span class="fcn" id="F237N2:B79">SDRU_MAX_FRAMELENGTH</span>()</span></span>; <span class="comment">% Arbitrary max imposed on ML/SL side</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,27" id="srcline27"> 27</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="68,28" id="srcline28"> 28</a></span><span class="line"><span class="comment">% function is being called in interpreted mode</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,29" id="srcline29"> 29</a></span><span class="line"><span class="keyword">if</span> (isempty(coder.target()))</span></span>
<span class="srcline"><span class="lineno"><a href="68,30" id="srcline30"> 30</a></span><span class="line">  </span></span>
<span class="srcline"><span class="lineno"><a href="68,31" id="srcline31"> 31</a></span><span class="line">    <span class="keyword">switch</span> (<span class="var type0" id="S3T0U91">cmd</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="68,32" id="srcline32"> 32</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'reportDrivers'</span>, <span class="string">'getSDRuDriverVersion'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="68,33" id="srcline33"> 33</a></span><span class="line">            [<span class="var type0" id="S18T0U100">retStr</span>, <span class="var type0" id="S19T0U101">errStat</span>, <span class="var type0" id="S20T0U102">errStr</span>] = usrp_uhd_mapi(<span class="var type0" id="S3T0U105">cmd</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="68,34" id="srcline34"> 34</a></span><span class="line">            <span class="var type0" id="S2T0U109">varargout</span>{1} = <span class="var type0" id="S18T0U111">retStr</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,35" id="srcline35"> 35</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="68,36" id="srcline36"> 36</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'getSDRuList'</span>, <span class="string">'getDeviceDescription'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="68,37" id="srcline37"> 37</a></span><span class="line">            [<span class="var type0" id="S18T0U120">retStr</span>, <span class="var type0" id="S19T0U121">errStat</span>, <span class="var type0" id="S20T0U122">errStr</span>] = usrp_uhd_mapi(<span class="var type0" id="S3T0U125">cmd</span>, <span class="var type0" id="S4T0U127">varargin</span>{:});</span></span>
<span class="srcline"><span class="lineno"><a href="68,38" id="srcline38"> 38</a></span><span class="line">            <span class="var type0" id="S2T0U132">varargout</span>{1} = <span class="var type0" id="S18T0U134">retStr</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,39" id="srcline39"> 39</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="68,40" id="srcline40"> 40</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'closeDataConnection'</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,41" id="srcline41"> 41</a></span><span class="line">            [<span class="var type0" id="S19T0U140">errStat</span>, <span class="var type0" id="S20T0U141">errStr</span>] = usrp_uhd_mapi(<span class="var type0" id="S3T0U144">cmd</span>, <span class="var type0" id="S4T0U146">varargin</span>{:});</span></span>
<span class="srcline"><span class="lineno"><a href="68,42" id="srcline42"> 42</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="68,43" id="srcline43"> 43</a></span><span class="line">            <span class="comment">% Unlock the mex file if called from MATLAB. This is not called for</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,44" id="srcline44"> 44</a></span><span class="line">            <span class="comment">% generated code. See "openDataConnection".</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,45" id="srcline45"> 45</a></span><span class="line">            <span class="keyword">if</span> <span class="var type0" id="S19T0U151">errStat</span> == UsrpErrorCapiEnumT.UsrpDriverSuccess</span></span>
<span class="srcline"><span class="lineno"><a href="68,46" id="srcline46"> 46</a></span><span class="line">              usrp_uhd_mapi(<span class="string">'sdruMexUnlock'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="68,47" id="srcline47"> 47</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,48" id="srcline48"> 48</a></span><span class="line">              </span></span>
<span class="srcline"><span class="lineno"><a href="68,49" id="srcline49"> 49</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'setClockConfig'</span>, <span class="string">'setClockConfigFull'</span>, <span class="string">'checkSDRHostName'</span>, <span class="string">'deleteDriver'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="68,50" id="srcline50"> 50</a></span><span class="line">            [<span class="var type0" id="S19T0U169">errStat</span>, <span class="var type0" id="S20T0U170">errStr</span>] = usrp_uhd_mapi(<span class="var type0" id="S3T0U173">cmd</span>, <span class="var type0" id="S4T0U175">varargin</span>{:});</span></span>
<span class="srcline"><span class="lineno"><a href="68,51" id="srcline51"> 51</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="68,52" id="srcline52"> 52</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'openDataConnection'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="68,53" id="srcline53"> 53</a></span><span class="line">            [<span class="var type0" id="S2T0U185">varargout</span>{1}, <span class="var type0" id="S19T0U187">errStat</span>, <span class="var type0" id="S20T0U188">errStr</span>] = usrp_uhd_mapi(<span class="var type0" id="S3T0U191">cmd</span>, <span class="var type0" id="S4T0U193">varargin</span>{:});</span></span>
<span class="srcline"><span class="lineno"><a href="68,54" id="srcline54"> 54</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="68,55" id="srcline55"> 55</a></span><span class="line">            <span class="comment">% Lock the mex file if called from MATLAB. This is not called for</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,56" id="srcline56"> 56</a></span><span class="line">            <span class="comment">% generated code. Locking the mex file in MATLAB prevents MATLAB</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,57" id="srcline57"> 57</a></span><span class="line">            <span class="comment">% from hanging if clear all is called. Clear all first deletes mex</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,58" id="srcline58"> 58</a></span><span class="line">            <span class="comment">% files. That removes the driver and hangs MATLAB if a driver is in</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,59" id="srcline59"> 59</a></span><span class="line">            <span class="comment">% use, i.e. System object is locked. Lock only if successful.</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,60" id="srcline60"> 60</a></span><span class="line">            <span class="keyword">if</span> <span class="var type0" id="S19T0U198">errStat</span> == UsrpErrorCapiEnumT.UsrpDriverSuccess</span></span>
<span class="srcline"><span class="lineno"><a href="68,61" id="srcline61"> 61</a></span><span class="line">              usrp_uhd_mapi(<span class="string">'sdruMexLock'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="68,62" id="srcline62"> 62</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,63" id="srcline63"> 63</a></span><span class="line">           </span></span>
<span class="srcline"><span class="lineno"><a href="68,64" id="srcline64"> 64</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'setFrequency'</span>, <span class="string">'getFrequency'</span>, <span class="string">'setGain'</span>, <span class="string">'getGain'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="68,65" id="srcline65"> 65</a></span><span class="line">            [<span class="var type0" id="S2T0U217">varargout</span>{1}, <span class="var type0" id="S19T0U219">errStat</span>, <span class="var type0" id="S20T0U220">errStr</span>] = usrp_uhd_mapi(<span class="var type0" id="S3T0U223">cmd</span>, <span class="var type0" id="S4T0U225">varargin</span>{:});</span></span>
<span class="srcline"><span class="lineno"><a href="68,66" id="srcline66"> 66</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="68,67" id="srcline67"> 67</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'setRate'</span>, <span class="string">'getRate'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,68" id="srcline68"> 68</a></span><span class="line">              <span class="string">'setMasterClockRate'</span>, <span class="string">'getMasterClockRate'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,69" id="srcline69"> 69</a></span><span class="line">              <span class="string">'getFrequencyRange'</span>, <span class="string">'getGainRange'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,70" id="srcline70"> 70</a></span><span class="line">              <span class="string">'createDriver'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="68,71" id="srcline71"> 71</a></span><span class="line">            [<span class="var type0" id="S2T0U241">varargout</span>{1}, <span class="var type0" id="S19T0U243">errStat</span>, <span class="var type0" id="S20T0U244">errStr</span>] = usrp_uhd_mapi(<span class="var type0" id="S3T0U247">cmd</span>, <span class="var type0" id="S4T0U249">varargin</span>{:});</span></span>
<span class="srcline"><span class="lineno"><a href="68,72" id="srcline72"> 72</a></span><span class="line">           </span></span>
<span class="srcline"><span class="lineno"><a href="68,73" id="srcline73"> 73</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'sendInt16Data'</span>,  <span class="string">'sendComplexInt16Data'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,74" id="srcline74"> 74</a></span><span class="line">              <span class="string">'sendSingleData'</span>, <span class="string">'sendComplexSingleData'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,75" id="srcline75"> 75</a></span><span class="line">              <span class="string">'sendDoubleData'</span>, <span class="string">'sendComplexDoubleData'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,76" id="srcline76"> 76</a></span><span class="line">              <span class="string">'sendInt16Data_x'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="68,77" id="srcline77"> 77</a></span><span class="line">            [<span class="var type0" id="S2T0U265">varargout</span>{1}, <span class="var type0" id="S19T0U267">errStat</span>, <span class="var type0" id="S20T0U268">errStr</span>] = usrp_uhd_mapi(<span class="var type0" id="S3T0U271">cmd</span>, <span class="var type0" id="S4T0U273">varargin</span>{:});</span></span>
<span class="srcline"><span class="lineno"><a href="68,78" id="srcline78"> 78</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="68,79" id="srcline79"> 79</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'receiveData'</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,80" id="srcline80"> 80</a></span><span class="line">            [<span class="var type0" id="S2T0U281">varargout</span>{1}, <span class="var type0" id="S2T0U284">varargout</span>{2}, <span class="var type0" id="S2T0U287">varargout</span>{3}, <span class="var type0" id="S19T0U289">errStat</span>, <span class="var type0" id="S20T0U290">errStr</span>] = <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,81" id="srcline81"> 81</a></span><span class="line">                usrp_uhd_mapi(<span class="var type0" id="S3T0U293">cmd</span>, <span class="var type0" id="S4T0U295">varargin</span>{:});</span></span>
<span class="srcline"><span class="lineno"><a href="68,82" id="srcline82"> 82</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,83" id="srcline83"> 83</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="68,84" id="srcline84"> 84</a></span><span class="line"><span class="comment">% function is being called in codegen mode</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,85" id="srcline85"> 85</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,86" id="srcline86"> 86</a></span><span class="line">    <span class="comment">% not being found: </span></span></span>
<span class="srcline"><span class="lineno"><a href="68,87" id="srcline87"> 87</a></span><span class="line">    <span class="comment">% eml_allow_enum_inputs;</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,88" id="srcline88"> 88</a></span><span class="line">    <span class="comment">%errStat_i = int32(0);</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,89" id="srcline89"> 89</a></span><span class="line">    <span class="mxinfo " id="T59:U28"><span class="var type1" id="S23T59U300">errStat_i</span> = <span class="mxinfo " id="T59:U30">UsrpErrorCapiEnumT(0)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,90" id="srcline90"> 90</a></span><span class="line">    <span class="mxinfo " id="T43:U31"><span class="var type1" id="S20T43U306">errStr</span>  = <span class="mxinfo " id="T66:U33">char(zeros(1,<span class="var type1" id="S15T6U312">MAX_ERROR_MESSAGE_LENGTH</span>))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,91" id="srcline91"> 91</a></span><span class="line">    coder.varsize(<span class="string">'errStr'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="68,92" id="srcline92"> 92</a></span><span class="line">    <span class="mxinfo " id="T9:U35"><span class="var type1" id="S26T9U321">errStrSize</span> = <span class="mxinfo " id="T9:U37">int32(<span class="mxinfo " id="T6:U38">0</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,93" id="srcline93"> 93</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="68,94" id="srcline94"> 94</a></span><span class="line">    <span class="mxinfo " id="T79:U39"><span class="var type1" id="S28T79U327">cmd_c</span> = <span class="mxinfo " id="T79:U41">[<span class="var type1" id="S3T67U330">cmd</span> <span class="string">'_c'</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,95" id="srcline95"> 95</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="68,96" id="srcline96"> 96</a></span><span class="line">    <span class="keyword">switch</span> (<span class="var type1" id="S3T67U334">cmd</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="68,97" id="srcline97"> 97</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'sdruMexLock'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="68,98" id="srcline98"> 98</a></span><span class="line">             coder.ceval(<span class="string">'mexLock'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="68,99" id="srcline99"> 99</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'sdruMexUnlock'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="68,100" id="srcline100">100</a></span><span class="line">             coder.ceval(<span class="string">'mexUnlock'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="68,101" id="srcline101">101</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'reportDrivers'</span>, <span class="string">'getSDRuDriverVersion'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="68,102" id="srcline102">102</a></span><span class="line">            <span class="mxinfo " id="T43:U44"><span class="var type1" id="S29T43U362">flatAddrList</span>     = <span class="mxinfo " id="T80:U46">char(zeros(1,<span class="var type1" id="S13T6U368">MAX_STR_SIZE</span>))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,103" id="srcline103">103</a></span><span class="line">            coder.varsize(<span class="string">'flatAddrList'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="68,104" id="srcline104">104</a></span><span class="line">            <span class="mxinfo " id="T9:U48"><span class="var type1" id="S30T9U377">flatAddrListSize</span> = <span class="mxinfo " id="T9:U50">int32(<span class="mxinfo " id="T6:U51">0</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,105" id="srcline105">105</a></span><span class="line">            coder.ceval(<span class="var type1" id="S28T79U386">cmd_c</span>, coder.ref(<span class="mxinfo " id="T43:U53"><span class="var type1" id="S29T43U391">flatAddrList</span></span>), coder.wref(<span class="var type1" id="S23T59U396">errStat_i</span>), coder.ref(<span class="mxinfo " id="T43:U56"><span class="var type1" id="S20T43U401">errStr</span></span>));</span></span>
<span class="srcline"><span class="lineno"><a href="68,106" id="srcline106">106</a></span><span class="line">            <span class="mxinfo " id="T9:U58"><span class="var type1" id="S30T9U404">flatAddrListSize</span> = <span class="mxinfo " id="T9:U60">coder.ceval(<span class="string">'strlen'</span>, coder.rref(<span class="mxinfo " id="T43:U61"><span class="var type1" id="S29T43U414">flatAddrList</span></span>))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,107" id="srcline107">107</a></span><span class="line">            assert(<span class="mxinfo " id="T4:U63"><span class="var type1" id="S30T9U419">flatAddrListSize</span> &lt;= <span class="var type1" id="S13T6U420">MAX_STR_SIZE</span></span>);</span></span>
<span class="srcline"><span class="lineno"><a href="68,108" id="srcline108">108</a></span><span class="line">            <span class="mxinfo " id="T43:U66"><span class="var type1" id="S29T43U423">flatAddrList</span>     = <span class="mxinfo " id="T43:U68"><span class="var type1" id="S29T43U425">flatAddrList</span>(<span class="mxinfo " id="T44:U70"><span class="mxinfo " id="T9:U71">1</span>:<span class="var type1" id="S30T9U428">flatAddrListSize</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,109" id="srcline109">109</a></span><span class="line">            <span class="mxinfo " id="T43:U73"><span class="mxinfo " id="T43:U74"><span class="var type1" id="S2T64U432">varargout</span>{1}</span>     = <span class="var type1" id="S29T43U434">flatAddrList</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,110" id="srcline110">110</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="68,111" id="srcline111">111</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'getSDRuList'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="68,112" id="srcline112">112</a></span><span class="line">            <span class="var type0" id="S32T0U441">addr_null</span>= [<span class="var type0" id="S4T0U445">varargin</span>{1} 0];</span></span>
<span class="srcline"><span class="lineno"><a href="68,113" id="srcline113">113</a></span><span class="line">            <span class="var type0" id="S33T0U450">addr_c</span>   = coder.opaque(<span class="string">'char *'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="68,114" id="srcline114">114</a></span><span class="line">            <span class="var type0" id="S33T0U458">addr_c</span>   = coder.ceval(<span class="string">'(char *)'</span>, coder.rref(<span class="var type0" id="S32T0U468">addr_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="68,115" id="srcline115">115</a></span><span class="line">            <span class="var type0" id="S29T0U471">flatAddrList</span>     = char(zeros(1,<span class="var type0" id="S13T0U477">MAX_STR_SIZE</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="68,116" id="srcline116">116</a></span><span class="line">            coder.varsize(<span class="string">'flatAddrList'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="68,117" id="srcline117">117</a></span><span class="line">            <span class="var type0" id="S30T0U486">flatAddrListSize</span> = int32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="68,118" id="srcline118">118</a></span><span class="line">            coder.ceval(<span class="var type0" id="S28T0U495">cmd_c</span>, <span class="var type0" id="S33T0U496">addr_c</span>, coder.ref(<span class="var type0" id="S29T0U501">flatAddrList</span>), coder.wref(<span class="var type0" id="S23T0U506">errStat_i</span>), coder.ref(<span class="var type0" id="S20T0U511">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="68,119" id="srcline119">119</a></span><span class="line">            <span class="var type0" id="S30T0U514">flatAddrListSize</span> = coder.ceval(<span class="string">'strlen'</span>, coder.rref(<span class="var type0" id="S29T0U524">flatAddrList</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="68,120" id="srcline120">120</a></span><span class="line">            assert(<span class="var type0" id="S30T0U529">flatAddrListSize</span> &lt;= <span class="var type0" id="S13T0U530">MAX_STR_SIZE</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="68,121" id="srcline121">121</a></span><span class="line">            <span class="var type0" id="S29T0U533">flatAddrList</span>     = <span class="var type0" id="S29T0U535">flatAddrList</span>(1:<span class="var type0" id="S30T0U538">flatAddrListSize</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="68,122" id="srcline122">122</a></span><span class="line">            <span class="var type0" id="S2T0U542">varargout</span>{1}     = <span class="var type0" id="S29T0U544">flatAddrList</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,123" id="srcline123">123</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="68,124" id="srcline124">124</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'createDriver'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="68,125" id="srcline125">125</a></span><span class="line">            <span class="comment">% NOTE: we expect to treat input strings as uint8 arrays in this</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,126" id="srcline126">126</a></span><span class="line">            <span class="comment">% code.  If we did not, then if the MATLAB char array involved chars</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,127" id="srcline127">127</a></span><span class="line">            <span class="comment">% that took up &gt;1 byte, we'd get an error from the coder mex about</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,128" id="srcline128">128</a></span><span class="line">            <span class="comment">% the array size changing.  ("The conversion from a unicode string</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,129" id="srcline129">129</a></span><span class="line">            <span class="comment">% to a local code page changes the number of characters.  This is </span></span></span>
<span class="srcline"><span class="lineno"><a href="68,130" id="srcline130">130</a></span><span class="line">            <span class="comment">% not supported.") For example, a block name of foo??ball will </span></span></span>
<span class="srcline"><span class="lineno"><a href="68,131" id="srcline131">131</a></span><span class="line">            <span class="comment">% error out.</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,132" id="srcline132">132</a></span><span class="line">            <span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,133" id="srcline133">133</a></span><span class="line">            <span class="comment">% The following code will handle input strings that have been passed</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,134" id="srcline134">134</a></span><span class="line">            <span class="comment">% in as uint8 arrays.  Callers must do the casting.</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,135" id="srcline135">135</a></span><span class="line">            <span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,136" id="srcline136">136</a></span><span class="line">            <span class="var type0" id="S34T0U551">driverApiH</span> = int32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="68,137" id="srcline137">137</a></span><span class="line">            <span class="var type0" id="S32T0U557">addr_null</span>= [<span class="var type0" id="S4T0U561">varargin</span>{1} 0];</span></span>
<span class="srcline"><span class="lineno"><a href="68,138" id="srcline138">138</a></span><span class="line">            <span class="var type0" id="S33T0U566">addr_c</span>   = coder.opaque(<span class="string">'char *'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="68,139" id="srcline139">139</a></span><span class="line">            <span class="var type0" id="S33T0U574">addr_c</span>   = coder.ceval(<span class="string">'(char *)'</span>, coder.rref(<span class="var type0" id="S32T0U584">addr_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="68,140" id="srcline140">140</a></span><span class="line">            <span class="var type0" id="S35T0U587">req_null</span> = [<span class="var type0" id="S4T0U591">varargin</span>{4} 0];</span></span>
<span class="srcline"><span class="lineno"><a href="68,141" id="srcline141">141</a></span><span class="line">            <span class="var type0" id="S36T0U596">req_c</span>    = coder.opaque(<span class="string">'char *'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="68,142" id="srcline142">142</a></span><span class="line">            <span class="var type0" id="S36T0U604">req_c</span>    = coder.ceval(<span class="string">'(char *)'</span>, coder.rref(<span class="var type0" id="S35T0U614">req_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="68,143" id="srcline143">143</a></span><span class="line">            coder.ceval(<span class="var type0" id="S28T0U620">cmd_c</span>, <span class="var type0" id="S33T0U621">addr_c</span>, <span class="var type0" id="S4T0U623">varargin</span>{2}, <span class="var type0" id="S4T0U626">varargin</span>{3}, <span class="var type0" id="S36T0U628">req_c</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,144" id="srcline144">144</a></span><span class="line">                        coder.wref(<span class="var type0" id="S34T0U633">driverApiH</span>), coder.wref(<span class="var type0" id="S23T0U638">errStat_i</span>), coder.ref(<span class="var type0" id="S20T0U643">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="68,145" id="srcline145">145</a></span><span class="line">            <span class="var type0" id="S2T0U647">varargout</span>{1} = <span class="var type0" id="S34T0U649">driverApiH</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,146" id="srcline146">146</a></span><span class="line">            <span class="comment">% Tell coder that addr_null &amp; req_null must be alive and separate throughout the call to cmd_c.</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,147" id="srcline147">147</a></span><span class="line">            coder.ceval(<span class="string">'(void)'</span>, coder.rref(<span class="var type0" id="S32T0U660">addr_null</span>)); </span></span>
<span class="srcline"><span class="lineno"><a href="68,148" id="srcline148">148</a></span><span class="line">            coder.ceval(<span class="string">'(void)'</span>, coder.rref(<span class="var type0" id="S35T0U671">req_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="68,149" id="srcline149">149</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="68,150" id="srcline150">150</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'openDataConnection'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="68,151" id="srcline151">151</a></span><span class="line">            <span class="comment">% varargin   1      2         3          4              5       6         7             8              9</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,152" id="srcline152">152</a></span><span class="line">            <span class="comment">%           addr, boardId, requester, frameLength, dportType, buffMode, buffSize, masterClockRate, channelMapping</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,153" id="srcline153">153</a></span><span class="line">            <span class="comment">% varargout  1         2         3</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,154" id="srcline154">154</a></span><span class="line">            <span class="comment">%           driverH, errStat, errMsg</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,155" id="srcline155">155</a></span><span class="line">            <span class="var type0" id="S34T0U678">driverApiH</span> = int32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="68,156" id="srcline156">156</a></span><span class="line">            <span class="var type0" id="S32T0U684">addr_null</span>= [<span class="var type0" id="S4T0U688">varargin</span>{1} 0];</span></span>
<span class="srcline"><span class="lineno"><a href="68,157" id="srcline157">157</a></span><span class="line">            <span class="var type0" id="S33T0U693">addr_c</span>   = coder.opaque(<span class="string">'char *'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="68,158" id="srcline158">158</a></span><span class="line">            <span class="var type0" id="S33T0U701">addr_c</span>   = coder.ceval(<span class="string">'(char *)'</span>, coder.rref(<span class="var type0" id="S32T0U711">addr_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="68,159" id="srcline159">159</a></span><span class="line">            <span class="var type0" id="S35T0U714">req_null</span> = [<span class="var type0" id="S4T0U718">varargin</span>{3} 0];</span></span>
<span class="srcline"><span class="lineno"><a href="68,160" id="srcline160">160</a></span><span class="line">            <span class="var type0" id="S36T0U723">req_c</span>    = coder.opaque(<span class="string">'char *'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="68,161" id="srcline161">161</a></span><span class="line">            <span class="var type0" id="S36T0U731">req_c</span>    = coder.ceval(<span class="string">'(char *)'</span>, coder.rref(<span class="var type0" id="S35T0U741">req_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="68,162" id="srcline162">162</a></span><span class="line">            coder.internal.assert(<span class="var type0" id="S4T0U751">varargin</span>{4}&lt;=<span class="var type0" id="S16T0U753">MAX_FRAMELENGTH</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,163" id="srcline163">163</a></span><span class="line">              <span class="string">'sdru:mapiPrivate:invalidFrameLength'</span>, <span class="var type0" id="S16T0U755">MAX_FRAMELENGTH</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="68,164" id="srcline164">164</a></span><span class="line">            <span class="var type0" id="S37T0U758">frameLength</span> = uint32(<span class="var type0" id="S4T0U762">varargin</span>{4});</span></span>
<span class="srcline"><span class="lineno"><a href="68,165" id="srcline165">165</a></span><span class="line">            <span class="var type0" id="S39T0U766">buffSize</span>    = uint32(<span class="var type0" id="S4T0U770">varargin</span>{7});</span></span>
<span class="srcline"><span class="lineno"><a href="68,166" id="srcline166">166</a></span><span class="line">            <span class="var type0" id="S40T0U774">masterClockRate</span> = <span class="var type0" id="S4T0U776">varargin</span>{8};</span></span>
<span class="srcline"><span class="lineno"><a href="68,167" id="srcline167">167</a></span><span class="line">            <span class="var type0" id="S41T0U780">channelMapping</span> = <span class="var type0" id="S4T0U782">varargin</span>{9};</span></span>
<span class="srcline"><span class="lineno"><a href="68,168" id="srcline168">168</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="68,169" id="srcline169">169</a></span><span class="line">            coder.ceval(<span class="var type0" id="S28T0U789">cmd_c</span>, <span class="var type0" id="S33T0U790">addr_c</span>, <span class="var type0" id="S4T0U792">varargin</span>{2}, <span class="var type0" id="S36T0U794">req_c</span>, <span class="var type0" id="S37T0U795">frameLength</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,170" id="srcline170">170</a></span><span class="line">                        <span class="var type0" id="S4T0U797">varargin</span>{5}, <span class="var type0" id="S4T0U800">varargin</span>{6}, <span class="var type0" id="S39T0U802">buffSize</span>, <span class="var type0" id="S40T0U803">masterClockRate</span>, <span class="var type0" id="S41T0U804">channelMapping</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,171" id="srcline171">171</a></span><span class="line">                        coder.wref(<span class="var type0" id="S34T0U809">driverApiH</span>), coder.wref(<span class="var type0" id="S23T0U814">errStat_i</span>), coder.ref(<span class="var type0" id="S20T0U819">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="68,172" id="srcline172">172</a></span><span class="line">            <span class="var type0" id="S2T0U823">varargout</span>{1} = <span class="var type0" id="S34T0U825">driverApiH</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,173" id="srcline173">173</a></span><span class="line">            <span class="comment">% Tell coder that addr_null &amp; req_null must be alive and separate throughout the call to cmd_c.</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,174" id="srcline174">174</a></span><span class="line">            coder.ceval(<span class="string">'(void)'</span>, coder.rref(<span class="var type0" id="S32T0U836">addr_null</span>)); </span></span>
<span class="srcline"><span class="lineno"><a href="68,175" id="srcline175">175</a></span><span class="line">            coder.ceval(<span class="string">'(void)'</span>, coder.rref(<span class="var type0" id="S35T0U847">req_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="68,176" id="srcline176">176</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="68,177" id="srcline177">177</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'deleteDriver'</span>, <span class="string">'setClockConfig'</span>, <span class="string">'closeDataConnection'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="68,178" id="srcline178">178</a></span><span class="line">            coder.ceval(<span class="var type0" id="S28T0U859">cmd_c</span>, <span class="var type0" id="S4T0U861">varargin</span>{:}, coder.wref(<span class="var type0" id="S23T0U867">errStat_i</span>), coder.ref(<span class="var type0" id="S20T0U872">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="68,179" id="srcline179">179</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="68,180" id="srcline180">180</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'checkSDRHostName'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="68,181" id="srcline181">181</a></span><span class="line">            <span class="var type0" id="S32T0U879">addr_null</span>= [<span class="var type0" id="S4T0U883">varargin</span>{1} 0];</span></span>
<span class="srcline"><span class="lineno"><a href="68,182" id="srcline182">182</a></span><span class="line">            <span class="var type0" id="S33T0U888">addr_c</span>   = coder.opaque(<span class="string">'char *'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="68,183" id="srcline183">183</a></span><span class="line">            <span class="var type0" id="S33T0U896">addr_c</span>   = coder.ceval(<span class="string">'(char *)'</span>, coder.rref(<span class="var type0" id="S32T0U906">addr_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="68,184" id="srcline184">184</a></span><span class="line">            coder.ceval(<span class="var type0" id="S28T0U912">cmd_c</span>, <span class="var type0" id="S33T0U913">addr_c</span>, coder.wref(<span class="var type0" id="S23T0U918">errStat_i</span>), coder.ref(<span class="var type0" id="S20T0U923">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="68,185" id="srcline185">185</a></span><span class="line">            <span class="comment">% Tell coder that addr_null  must be alive throughout the call to cmd_c.</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,186" id="srcline186">186</a></span><span class="line">            coder.ceval(<span class="string">'(void)'</span>, coder.rref(<span class="var type0" id="S32T0U934">addr_null</span>)); </span></span>
<span class="srcline"><span class="lineno"><a href="68,187" id="srcline187">187</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="68,188" id="srcline188">188</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'getDeviceDescription'</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,189" id="srcline189">189</a></span><span class="line">            <span class="var type0" id="S42T0U939">descStr</span> = char(zeros(1,<span class="var type0" id="S14T0U945">MAX_DEV_DESCR_STR_SIZE</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="68,190" id="srcline190">190</a></span><span class="line">            coder.varsize(<span class="string">'descStr'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="68,191" id="srcline191">191</a></span><span class="line">            <span class="var type0" id="S43T0U954">descStrSize</span> = int32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="68,192" id="srcline192">192</a></span><span class="line">            coder.ceval(<span class="var type0" id="S28T0U963">cmd_c</span>, <span class="var type0" id="S4T0U965">varargin</span>{:}, coder.ref(<span class="var type0" id="S42T0U971">descStr</span>), coder.wref(<span class="var type0" id="S23T0U976">errStat_i</span>), coder.ref(<span class="var type0" id="S20T0U981">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="68,193" id="srcline193">193</a></span><span class="line">            <span class="var type0" id="S43T0U984">descStrSize</span> = coder.ceval(<span class="string">'strlen'</span>, coder.rref(<span class="var type0" id="S42T0U994">descStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="68,194" id="srcline194">194</a></span><span class="line">            assert(<span class="var type0" id="S43T0U999">descStrSize</span> &lt;= <span class="var type0" id="S14T0U1000">MAX_DEV_DESCR_STR_SIZE</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="68,195" id="srcline195">195</a></span><span class="line">            <span class="var type0" id="S42T0U1003">descStr</span> = <span class="var type0" id="S42T0U1005">descStr</span>(1:<span class="var type0" id="S43T0U1008">descStrSize</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="68,196" id="srcline196">196</a></span><span class="line">            <span class="var type0" id="S2T0U1012">varargout</span>{1} = <span class="var type0" id="S42T0U1014">descStr</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,197" id="srcline197">197</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="68,198" id="srcline198">198</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'setClockConfigFull'</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,199" id="srcline199">199</a></span><span class="line">            <span class="var type0" id="S44T0U1019">localClockConfig</span> = <span class="var type0" id="S4T0U1021">varargin</span>{2};</span></span>
<span class="srcline"><span class="lineno"><a href="68,200" id="srcline200">200</a></span><span class="line">            coder.cstructname(<span class="var type0" id="S44T0U1028">localClockConfig</span>, <span class="string">'ClockConfigCapiT'</span>, <span class="string">'extern'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="68,201" id="srcline201">201</a></span><span class="line">            coder.ceval(<span class="var type0" id="S28T0U1036">cmd_c</span>, <span class="var type0" id="S4T0U1038">varargin</span>{1}, <span class="var type0" id="S44T0U1040">localClockConfig</span>, coder.wref(<span class="var type0" id="S23T0U1045">errStat_i</span>), coder.ref(<span class="var type0" id="S20T0U1050">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="68,202" id="srcline202">202</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="68,203" id="srcline203">203</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'setRate'</span>, <span class="string">'setGain'</span>, <span class="string">'getRate'</span>, <span class="string">'getFrequency'</span>, <span class="string">'getGain'</span>, <span class="string">'setMasterClockRate'</span>, <span class="string">'getMasterClockRate'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="68,204" id="srcline204">204</a></span><span class="line">            <span class="var type0" id="S45T0U1063">actualValue</span> = double(0);</span></span>
<span class="srcline"><span class="lineno"><a href="68,205" id="srcline205">205</a></span><span class="line">            coder.ceval(<span class="var type0" id="S28T0U1072">cmd_c</span>, <span class="var type0" id="S4T0U1074">varargin</span>{:}, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,206" id="srcline206">206</a></span><span class="line">                        coder.wref(<span class="var type0" id="S45T0U1080">actualValue</span>), coder.wref(<span class="var type0" id="S23T0U1085">errStat_i</span>), coder.ref(<span class="var type0" id="S20T0U1090">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="68,207" id="srcline207">207</a></span><span class="line">            <span class="var type0" id="S2T0U1094">varargout</span>{1} = <span class="var type0" id="S45T0U1096">actualValue</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,208" id="srcline208">208</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="68,209" id="srcline209">209</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'setFrequency'</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,210" id="srcline210">210</a></span><span class="line">            <span class="var type0" id="S47T0U1101">tuneResult</span> = TuneResultCapiT();</span></span>
<span class="srcline"><span class="lineno"><a href="68,211" id="srcline211">211</a></span><span class="line">            coder.cstructname(<span class="var type0" id="S47T0U1109">tuneResult</span>, <span class="string">'TuneResultCapiT'</span>, <span class="string">'extern'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="68,212" id="srcline212">212</a></span><span class="line">            coder.ceval(<span class="var type0" id="S28T0U1117">cmd_c</span>, <span class="var type0" id="S4T0U1119">varargin</span>{:}, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,213" id="srcline213">213</a></span><span class="line">                        coder.wref(<span class="var type0" id="S47T0U1125">tuneResult</span>), coder.wref(<span class="var type0" id="S23T0U1130">errStat_i</span>), coder.ref(<span class="var type0" id="S20T0U1135">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="68,214" id="srcline214">214</a></span><span class="line">            <span class="var type0" id="S2T0U1139">varargout</span>{1} = <span class="var type0" id="S47T0U1141">tuneResult</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,215" id="srcline215">215</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="68,216" id="srcline216">216</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'getFrequencyRange'</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,217" id="srcline217">217</a></span><span class="line">            <span class="var type0" id="S49T0U1146">freqRange</span> = FreqRangeCapiT();</span></span>
<span class="srcline"><span class="lineno"><a href="68,218" id="srcline218">218</a></span><span class="line">            coder.cstructname(<span class="var type0" id="S49T0U1154">freqRange</span>, <span class="string">'FreqRangeCapiT'</span>, <span class="string">'extern'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="68,219" id="srcline219">219</a></span><span class="line">            coder.ceval(<span class="var type0" id="S28T0U1162">cmd_c</span>, <span class="var type0" id="S4T0U1164">varargin</span>{:}, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,220" id="srcline220">220</a></span><span class="line">                        coder.wref(<span class="var type0" id="S49T0U1170">freqRange</span>), coder.wref(<span class="var type0" id="S23T0U1175">errStat_i</span>), coder.ref(<span class="var type0" id="S20T0U1180">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="68,221" id="srcline221">221</a></span><span class="line">            <span class="var type0" id="S2T0U1184">varargout</span>{1} = <span class="var type0" id="S49T0U1186">freqRange</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,222" id="srcline222">222</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="68,223" id="srcline223">223</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'getGainRange'</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,224" id="srcline224">224</a></span><span class="line">            <span class="var type0" id="S51T0U1191">gainRange</span> = GainRangeCapiT();</span></span>
<span class="srcline"><span class="lineno"><a href="68,225" id="srcline225">225</a></span><span class="line">            coder.cstructname(<span class="var type0" id="S51T0U1199">gainRange</span>, <span class="string">'GainRangeCapiT'</span>, <span class="string">'extern'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="68,226" id="srcline226">226</a></span><span class="line">            coder.ceval(<span class="var type0" id="S28T0U1207">cmd_c</span>, <span class="var type0" id="S4T0U1209">varargin</span>{:}, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,227" id="srcline227">227</a></span><span class="line">                        coder.wref(<span class="var type0" id="S51T0U1215">gainRange</span>), coder.wref(<span class="var type0" id="S23T0U1220">errStat_i</span>), coder.ref(<span class="var type0" id="S20T0U1225">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="68,228" id="srcline228">228</a></span><span class="line">            <span class="var type0" id="S2T0U1229">varargout</span>{1} = <span class="var type0" id="S51T0U1231">gainRange</span>;           </span></span>
<span class="srcline"><span class="lineno"><a href="68,229" id="srcline229">229</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="68,230" id="srcline230">230</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'receiveData'</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,231" id="srcline231">231</a></span><span class="line">            <span class="comment">% 46336 represents 0.00185344 seconds at 25Msps.  1 ms seems to be a decent</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,232" id="srcline232">232</a></span><span class="line">            <span class="comment">% time interval to interact with the IP stack on a default glnxa64 machine.</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,233" id="srcline233">233</a></span><span class="line">            <span class="comment">% 32768 seems to be the max for UHD(TM) so we may want to change to that.</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,234" id="srcline234">234</a></span><span class="line">            assert(<span class="var type0" id="S4T0U1239">varargin</span>{6}&lt;=<span class="var type0" id="S16T0U1241">MAX_FRAMELENGTH</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="68,235" id="srcline235">235</a></span><span class="line">            <span class="var type0" id="S37T0U1244">frameLength</span> = uint32(<span class="var type0" id="S4T0U1248">varargin</span>{6});</span></span>
<span class="srcline"><span class="lineno"><a href="68,236" id="srcline236">236</a></span><span class="line">            <span class="var type0" id="S53T0U1252">data</span>        = complex(zeros(<span class="var type0" id="S16T0U1257">MAX_FRAMELENGTH</span>, 1, <span class="string">'int16'</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="68,237" id="srcline237">237</a></span><span class="line">            <span class="var type0" id="S55T0U1262">dataLength</span>  = uint32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="68,238" id="srcline238">238</a></span><span class="line">            <span class="var type0" id="S56T0U1268">overflow</span>    = uint32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="68,239" id="srcline239">239</a></span><span class="line">            coder.ceval(<span class="var type0" id="S28T0U1277">cmd_c</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,240" id="srcline240">240</a></span><span class="line">                <span class="var type0" id="S4T0U1279">varargin</span>{1}, <span class="var type0" id="S4T0U1282">varargin</span>{2}, <span class="var type0" id="S4T0U1285">varargin</span>{3}, <span class="var type0" id="S4T0U1288">varargin</span>{4}, <span class="var type0" id="S4T0U1291">varargin</span>{5}, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,241" id="srcline241">241</a></span><span class="line">                coder.wref(<span class="var type0" id="S53T0U1297">data</span>), coder.wref(<span class="var type0" id="S55T0U1302">dataLength</span>), coder.wref(<span class="var type0" id="S56T0U1307">overflow</span>), <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,242" id="srcline242">242</a></span><span class="line">                coder.wref(<span class="var type0" id="S23T0U1312">errStat_i</span>), coder.ref(<span class="var type0" id="S20T0U1317">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="68,243" id="srcline243">243</a></span><span class="line">            <span class="var type0" id="S2T0U1321">varargout</span>{1} = <span class="var type0" id="S53T0U1323">data</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,244" id="srcline244">244</a></span><span class="line">            <span class="var type0" id="S2T0U1327">varargout</span>{2} = <span class="var type0" id="S55T0U1329">dataLength</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,245" id="srcline245">245</a></span><span class="line">            <span class="var type0" id="S2T0U1333">varargout</span>{3} = <span class="var type0" id="S56T0U1335">overflow</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,246" id="srcline246">246</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="68,247" id="srcline247">247</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'sendInt16Data'</span>,  <span class="string">'sendComplexInt16Data'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,248" id="srcline248">248</a></span><span class="line">              <span class="string">'sendSingleData'</span>, <span class="string">'sendComplexSingleData'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,249" id="srcline249">249</a></span><span class="line">              <span class="string">'sendDoubleData'</span>, <span class="string">'sendComplexDoubleData'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="68,250" id="srcline250">250</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="68,251" id="srcline251">251</a></span><span class="line">            assert(<span class="var type0" id="S4T0U1350">varargin</span>{7}&lt;=<span class="var type0" id="S16T0U1352">MAX_FRAMELENGTH</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="68,252" id="srcline252">252</a></span><span class="line">            <span class="var type0" id="S37T0U1355">frameLength</span> = uint32(<span class="var type0" id="S4T0U1359">varargin</span>{7});</span></span>
<span class="srcline"><span class="lineno"><a href="68,253" id="srcline253">253</a></span><span class="line">            <span class="var type0" id="S57T0U1363">underflow</span>   = uint32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="68,254" id="srcline254">254</a></span><span class="line">            coder.ceval(<span class="string">'sendData_c'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,255" id="srcline255">255</a></span><span class="line">                <span class="var type0" id="S4T0U1374">varargin</span>{1}, <span class="var type0" id="S4T0U1377">varargin</span>{2}, <span class="var type0" id="S4T0U1380">varargin</span>{3}, <span class="var type0" id="S4T0U1383">varargin</span>{4}, <span class="var type0" id="S4T0U1386">varargin</span>{5}, <span class="var type0" id="S4T0U1389">varargin</span>{6}, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,256" id="srcline256">256</a></span><span class="line">                coder.wref(<span class="var type0" id="S57T0U1395">underflow</span>), coder.wref(<span class="var type0" id="S23T0U1400">errStat_i</span>), coder.ref(<span class="var type0" id="S20T0U1405">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="68,257" id="srcline257">257</a></span><span class="line">            <span class="var type0" id="S2T0U1409">varargout</span>{1} = <span class="var type0" id="S57T0U1411">underflow</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,258" id="srcline258">258</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="68,259" id="srcline259">259</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'sendInt16Data_x'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="68,260" id="srcline260">260</a></span><span class="line">            assert(<span class="var type0" id="S4T0U1421">varargin</span>{7}&lt;=<span class="var type0" id="S16T0U1423">MAX_FRAMELENGTH</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="68,261" id="srcline261">261</a></span><span class="line">            <span class="var type0" id="S37T0U1426">frameLength</span> = uint32(<span class="var type0" id="S4T0U1430">varargin</span>{7});</span></span>
<span class="srcline"><span class="lineno"><a href="68,262" id="srcline262">262</a></span><span class="line">            <span class="var type0" id="S58T0U1434">dPortDType</span>  = DataPortDataTypeCapiEnumT.DPortDTypeInt16;</span></span>
<span class="srcline"><span class="lineno"><a href="68,263" id="srcline263">263</a></span><span class="line">            <span class="var type0" id="S57T0U1440">underflow</span>   = uint32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="68,264" id="srcline264">264</a></span><span class="line">            coder.ceval(<span class="string">'sendData_c'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,265" id="srcline265">265</a></span><span class="line">                <span class="var type0" id="S4T0U1451">varargin</span>{1}, <span class="var type0" id="S4T0U1454">varargin</span>{2}, <span class="var type0" id="S4T0U1457">varargin</span>{3}, <span class="var type0" id="S4T0U1460">varargin</span>{4}, <span class="var type0" id="S4T0U1463">varargin</span>{5}, <span class="var type0" id="S4T0U1466">varargin</span>{6}, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,266" id="srcline266">266</a></span><span class="line">                coder.wref(<span class="var type0" id="S57T0U1472">underflow</span>), coder.wref(<span class="var type0" id="S23T0U1477">errStat_i</span>), coder.ref(<span class="var type0" id="S20T0U1482">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="68,267" id="srcline267">267</a></span><span class="line">            <span class="var type0" id="S2T0U1486">varargout</span>{1} = <span class="var type0" id="S57T0U1488">underflow</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,268" id="srcline268">268</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,269" id="srcline269">269</a></span><span class="line">    <span class="comment">%errStat = UsrpErrorCapiEnumT(errStat_i);</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,270" id="srcline270">270</a></span><span class="line">    <span class="mxinfo " id="T59:U77"><span class="var type1" id="S19T59U1491">errStat</span>     = <span class="var type1" id="S23T59U1492">errStat_i</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,271" id="srcline271">271</a></span><span class="line">    <span class="mxinfo " id="T9:U80"><span class="var type1" id="S26T9U1495">errStrSize</span>  = <span class="mxinfo " id="T9:U82">coder.ceval(<span class="string">'strlen'</span>, coder.rref(<span class="mxinfo " id="T43:U83"><span class="var type1" id="S20T43U1505">errStr</span></span>))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,272" id="srcline272">272</a></span><span class="line">    assert(<span class="mxinfo " id="T4:U85"><span class="var type1" id="S26T9U1510">errStrSize</span> &lt;= <span class="var type1" id="S15T6U1511">MAX_ERROR_MESSAGE_LENGTH</span></span>);</span></span>
<span class="srcline"><span class="lineno"><a href="68,273" id="srcline273">273</a></span><span class="line">    <span class="mxinfo " id="T43:U88"><span class="var type1" id="S20T43U1514">errStr</span>      = <span class="mxinfo " id="T43:U90"><span class="var type1" id="S20T43U1516">errStr</span>(<span class="mxinfo " id="T44:U92"><span class="mxinfo " id="T9:U93">1</span>:<span class="var type1" id="S26T9U1519">errStrSize</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,274" id="srcline274">274</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,275" id="srcline275">275</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="68,276" id="srcline276">276</a></span><span class="line"><span class="keyword">switch</span> (<span class="var type1" id="S3T67U1522">cmd</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="68,277" id="srcline277">277</a></span><span class="line">    <span class="keyword">case</span> {<span class="string">'deleteDriver'</span>, <span class="string">'setClockConfig'</span>, <span class="string">'setClockConfigFull'</span>, <span class="string">'closeDataConnection'</span>, <span class="string">'checkSDRHostName'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="68,278" id="srcline278">278</a></span><span class="line">        <span class="var type0" id="S2T0U1534">varargout</span>{1} = <span class="var type0" id="S19T0U1536">errStat</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,279" id="srcline279">279</a></span><span class="line">        <span class="var type0" id="S2T0U1540">varargout</span>{2} = <span class="var type0" id="S20T0U1542">errStr</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,280" id="srcline280">280</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="68,281" id="srcline281">281</a></span><span class="line">    <span class="keyword">case</span> {<span class="string">'getSDRuList'</span>, <span class="string">'reportDrivers'</span>, <span class="string">'createDriver'</span>, <span class="string">'getDeviceDescription'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,282" id="srcline282">282</a></span><span class="line">          <span class="string">'setRate'</span>, <span class="string">'setFrequency'</span>, <span class="string">'setGain'</span>, <span class="string">'getRate'</span>, <span class="string">'getFrequency'</span>, <span class="string">'getGain'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,283" id="srcline283">283</a></span><span class="line">          <span class="string">'setMasterClockRate'</span>, <span class="string">'getMasterClockRate'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,284" id="srcline284">284</a></span><span class="line">          <span class="string">'getFrequencyRange'</span>, <span class="string">'getGainRange'</span>, <span class="string">'openDataConnection'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,285" id="srcline285">285</a></span><span class="line">          <span class="string">'sendInt16Data'</span>,  <span class="string">'sendComplexInt16Data'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,286" id="srcline286">286</a></span><span class="line">          <span class="string">'sendSingleData'</span>, <span class="string">'sendComplexSingleData'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,287" id="srcline287">287</a></span><span class="line">          <span class="string">'sendDoubleData'</span>, <span class="string">'sendComplexDoubleData'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,288" id="srcline288">288</a></span><span class="line">          <span class="string">'sendInt16Data_x'</span>, <span class="string">'getSDRuDriverVersion'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="68,289" id="srcline289">289</a></span><span class="line">        <span class="mxinfo " id="T59:U96"><span class="mxinfo " id="T59:U97"><span class="var type1" id="S2T64U1572">varargout</span>{2}</span> = <span class="var type1" id="S19T59U1574">errStat</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,290" id="srcline290">290</a></span><span class="line">        <span class="mxinfo " id="T43:U100"><span class="mxinfo " id="T43:U101"><span class="var type1" id="S2T64U1578">varargout</span>{3}</span> = <span class="var type1" id="S20T43U1580">errStr</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,291" id="srcline291">291</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="68,292" id="srcline292">292</a></span><span class="line">    <span class="keyword">case</span> <span class="string">'receiveData'</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,293" id="srcline293">293</a></span><span class="line">        <span class="var type0" id="S2T0U1586">varargout</span>{4} = <span class="var type0" id="S19T0U1588">errStat</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,294" id="srcline294">294</a></span><span class="line">        <span class="var type0" id="S2T0U1592">varargout</span>{5} = <span class="var type0" id="S20T0U1594">errStr</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="68,295" id="srcline295">295</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="68,296" id="srcline296">296</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="68,297" id="srcline297">297</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
