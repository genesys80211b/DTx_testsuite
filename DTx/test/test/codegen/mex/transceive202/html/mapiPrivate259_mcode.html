<pre class="code">
<span class="srcline"><span class="lineno"><a href="69,1" id="srcline1">  1</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S2T17U3">varargout</span> = mapiPrivate(<span class="mxinfo " id="T51:U2"><span class="var type2" id="S3T51V10U6">cmd</span></span>, <span class="var type1" id="S4T12U7">varargin</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="69,2" id="srcline2">  2</a></span><span class="line"><span class="comment">%#codegen</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,3" id="srcline3">  3</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,4" id="srcline4">  4</a></span><span class="line"><span class="comment">% This function unifies handling of interp vs. codegen call as well as</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,5" id="srcline5">  5</a></span><span class="line"><span class="comment">% errStat / errStr assignment.</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,6" id="srcline6">  6</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,7" id="srcline7">  7</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="69,8" id="srcline8">  8</a></span><span class="line"><span class="comment">%   Copyright 2011-2014 The MathWorks, Inc.</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,9" id="srcline9">  9</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="69,10" id="srcline10"> 10</a></span><span class="line">coder.extrinsic(<span class="string">'setupsdru'</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="69,11" id="srcline11"> 11</a></span><span class="line">coder.extrinsic(<span class="string">'sdruroot'</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="69,12" id="srcline12"> 12</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="69,13" id="srcline13"> 13</a></span><span class="line"><span class="keyword">persistent</span> <span class="var type1" id="S6T1U21">isSetupsdruCalled</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,14" id="srcline14"> 14</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T1:U6"><span class="mxinfo " id="T1:U7">isempty(<span class="var type0" id="S6T0U26">isSetupsdruCalled</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="69,15" id="srcline15"> 15</a></span><span class="line">  <span class="mxinfo " id="T1:U8"><span class="var type1" id="S6T1U29">isSetupsdruCalled</span> = <span class="mxinfo " id="T1:U10">false</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,16" id="srcline16"> 16</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,17" id="srcline17"> 17</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="69,18" id="srcline18"> 18</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T1:U11">~<span class="var type1" id="S6T1U36">isSetupsdruCalled</span></span> &amp;&amp; (isempty(coder.target()) || strcmp(coder.target(), <span class="string">'mex'</span>))</span></span>
<span class="srcline"><span class="lineno"><a href="69,19" id="srcline19"> 19</a></span><span class="line">    <span class="extrinsicFcn" id="F480N61:B54">setupsdru</span>(<span class="extrinsicFcn" id="F479N54:B56">sdruroot</span>, <span class="string">'silent'</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="69,20" id="srcline20"> 20</a></span><span class="line">    <span class="mxinfo " id="T1:U13"><span class="var type1" id="S6T1U60">isSetupsdruCalled</span> = <span class="mxinfo " id="T1:U15">true</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,21" id="srcline21"> 21</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,22" id="srcline22"> 22</a></span><span class="line">  </span></span>
<span class="srcline"><span class="lineno"><a href="69,23" id="srcline23"> 23</a></span><span class="line"><span class="mxinfo " id="T2:U16"><span class="var type1" id="S13T2U65">MAX_STR_SIZE</span>                = <span class="mxinfo " id="T2:U18">128</span></span>;   <span class="comment">% These sizes must match those in C code.</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,24" id="srcline24"> 24</a></span><span class="line"><span class="mxinfo " id="T2:U19"><span class="var type1" id="S14T2U69">MAX_DEV_DESCR_STR_SIZE</span>      = <span class="mxinfo " id="T2:U21">1024</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,25" id="srcline25"> 25</a></span><span class="line"><span class="mxinfo " id="T2:U22"><span class="var type1" id="S15T2U73">MAX_ERROR_MESSAGE_LENGTH</span>    = <span class="mxinfo " id="T2:U24">1024</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,26" id="srcline26"> 26</a></span><span class="line"><span class="mxinfo " id="T2:U25"><span class="var type1" id="S16T2U77">MAX_FRAMELENGTH</span>             = <span class="mxinfo " id="T2:U27"><span class="fcn" id="F227N2:B79">SDRU_MAX_FRAMELENGTH</span>()</span></span>; <span class="comment">% Arbitrary max imposed on ML/SL side</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,27" id="srcline27"> 27</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="69,28" id="srcline28"> 28</a></span><span class="line"><span class="comment">% function is being called in interpreted mode</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,29" id="srcline29"> 29</a></span><span class="line"><span class="keyword">if</span> (isempty(coder.target()))</span></span>
<span class="srcline"><span class="lineno"><a href="69,30" id="srcline30"> 30</a></span><span class="line">  </span></span>
<span class="srcline"><span class="lineno"><a href="69,31" id="srcline31"> 31</a></span><span class="line">    <span class="keyword">switch</span> (<span class="var type0" id="S3T0U91">cmd</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="69,32" id="srcline32"> 32</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'reportDrivers'</span>, <span class="string">'getSDRuDriverVersion'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="69,33" id="srcline33"> 33</a></span><span class="line">            [<span class="var type0" id="S18T0U100">retStr</span>, <span class="var type0" id="S19T0U101">errStat</span>, <span class="var type0" id="S20T0U102">errStr</span>] = usrp_uhd_mapi(<span class="var type0" id="S3T0U105">cmd</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="69,34" id="srcline34"> 34</a></span><span class="line">            <span class="var type0" id="S2T0U109">varargout</span>{1} = <span class="var type0" id="S18T0U111">retStr</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,35" id="srcline35"> 35</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="69,36" id="srcline36"> 36</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'getSDRuList'</span>, <span class="string">'getDeviceDescription'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="69,37" id="srcline37"> 37</a></span><span class="line">            [<span class="var type0" id="S18T0U120">retStr</span>, <span class="var type0" id="S19T0U121">errStat</span>, <span class="var type0" id="S20T0U122">errStr</span>] = usrp_uhd_mapi(<span class="var type0" id="S3T0U125">cmd</span>, <span class="var type0" id="S4T0U127">varargin</span>{:});</span></span>
<span class="srcline"><span class="lineno"><a href="69,38" id="srcline38"> 38</a></span><span class="line">            <span class="var type0" id="S2T0U132">varargout</span>{1} = <span class="var type0" id="S18T0U134">retStr</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,39" id="srcline39"> 39</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="69,40" id="srcline40"> 40</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'closeDataConnection'</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,41" id="srcline41"> 41</a></span><span class="line">            [<span class="var type0" id="S19T0U140">errStat</span>, <span class="var type0" id="S20T0U141">errStr</span>] = usrp_uhd_mapi(<span class="var type0" id="S3T0U144">cmd</span>, <span class="var type0" id="S4T0U146">varargin</span>{:});</span></span>
<span class="srcline"><span class="lineno"><a href="69,42" id="srcline42"> 42</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="69,43" id="srcline43"> 43</a></span><span class="line">            <span class="comment">% Unlock the mex file if called from MATLAB. This is not called for</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,44" id="srcline44"> 44</a></span><span class="line">            <span class="comment">% generated code. See "openDataConnection".</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,45" id="srcline45"> 45</a></span><span class="line">            <span class="keyword">if</span> <span class="var type0" id="S19T0U151">errStat</span> == UsrpErrorCapiEnumT.UsrpDriverSuccess</span></span>
<span class="srcline"><span class="lineno"><a href="69,46" id="srcline46"> 46</a></span><span class="line">              usrp_uhd_mapi(<span class="string">'sdruMexUnlock'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="69,47" id="srcline47"> 47</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,48" id="srcline48"> 48</a></span><span class="line">              </span></span>
<span class="srcline"><span class="lineno"><a href="69,49" id="srcline49"> 49</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'setClockConfig'</span>, <span class="string">'setClockConfigFull'</span>, <span class="string">'checkSDRHostName'</span>, <span class="string">'deleteDriver'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="69,50" id="srcline50"> 50</a></span><span class="line">            [<span class="var type0" id="S19T0U169">errStat</span>, <span class="var type0" id="S20T0U170">errStr</span>] = usrp_uhd_mapi(<span class="var type0" id="S3T0U173">cmd</span>, <span class="var type0" id="S4T0U175">varargin</span>{:});</span></span>
<span class="srcline"><span class="lineno"><a href="69,51" id="srcline51"> 51</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="69,52" id="srcline52"> 52</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'openDataConnection'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="69,53" id="srcline53"> 53</a></span><span class="line">            [<span class="var type0" id="S2T0U185">varargout</span>{1}, <span class="var type0" id="S19T0U187">errStat</span>, <span class="var type0" id="S20T0U188">errStr</span>] = usrp_uhd_mapi(<span class="var type0" id="S3T0U191">cmd</span>, <span class="var type0" id="S4T0U193">varargin</span>{:});</span></span>
<span class="srcline"><span class="lineno"><a href="69,54" id="srcline54"> 54</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="69,55" id="srcline55"> 55</a></span><span class="line">            <span class="comment">% Lock the mex file if called from MATLAB. This is not called for</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,56" id="srcline56"> 56</a></span><span class="line">            <span class="comment">% generated code. Locking the mex file in MATLAB prevents MATLAB</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,57" id="srcline57"> 57</a></span><span class="line">            <span class="comment">% from hanging if clear all is called. Clear all first deletes mex</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,58" id="srcline58"> 58</a></span><span class="line">            <span class="comment">% files. That removes the driver and hangs MATLAB if a driver is in</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,59" id="srcline59"> 59</a></span><span class="line">            <span class="comment">% use, i.e. System object is locked. Lock only if successful.</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,60" id="srcline60"> 60</a></span><span class="line">            <span class="keyword">if</span> <span class="var type0" id="S19T0U198">errStat</span> == UsrpErrorCapiEnumT.UsrpDriverSuccess</span></span>
<span class="srcline"><span class="lineno"><a href="69,61" id="srcline61"> 61</a></span><span class="line">              usrp_uhd_mapi(<span class="string">'sdruMexLock'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="69,62" id="srcline62"> 62</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,63" id="srcline63"> 63</a></span><span class="line">           </span></span>
<span class="srcline"><span class="lineno"><a href="69,64" id="srcline64"> 64</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'setRate'</span>, <span class="string">'setFrequency'</span>, <span class="string">'setGain'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,65" id="srcline65"> 65</a></span><span class="line">              <span class="string">'getRate'</span>, <span class="string">'getFrequency'</span>, <span class="string">'getGain'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,66" id="srcline66"> 66</a></span><span class="line">              <span class="string">'setMasterClockRate'</span>, <span class="string">'getMasterClockRate'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,67" id="srcline67"> 67</a></span><span class="line">              <span class="string">'getFrequencyRange'</span>, <span class="string">'getGainRange'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,68" id="srcline68"> 68</a></span><span class="line">              <span class="string">'createDriver'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="69,69" id="srcline69"> 69</a></span><span class="line">            [<span class="var type0" id="S2T0U224">varargout</span>{1}, <span class="var type0" id="S19T0U226">errStat</span>, <span class="var type0" id="S20T0U227">errStr</span>] = usrp_uhd_mapi(<span class="var type0" id="S3T0U230">cmd</span>, <span class="var type0" id="S4T0U232">varargin</span>{:});</span></span>
<span class="srcline"><span class="lineno"><a href="69,70" id="srcline70"> 70</a></span><span class="line">           </span></span>
<span class="srcline"><span class="lineno"><a href="69,71" id="srcline71"> 71</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'sendInt16Data'</span>,  <span class="string">'sendComplexInt16Data'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,72" id="srcline72"> 72</a></span><span class="line">              <span class="string">'sendSingleData'</span>, <span class="string">'sendComplexSingleData'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,73" id="srcline73"> 73</a></span><span class="line">              <span class="string">'sendDoubleData'</span>, <span class="string">'sendComplexDoubleData'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,74" id="srcline74"> 74</a></span><span class="line">              <span class="string">'sendInt16Data_x'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="69,75" id="srcline75"> 75</a></span><span class="line">            [<span class="var type0" id="S2T0U248">varargout</span>{1}, <span class="var type0" id="S19T0U250">errStat</span>, <span class="var type0" id="S20T0U251">errStr</span>] = usrp_uhd_mapi(<span class="var type0" id="S3T0U254">cmd</span>, <span class="var type0" id="S4T0U256">varargin</span>{:});</span></span>
<span class="srcline"><span class="lineno"><a href="69,76" id="srcline76"> 76</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="69,77" id="srcline77"> 77</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'receiveData'</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,78" id="srcline78"> 78</a></span><span class="line">            [<span class="var type0" id="S2T0U264">varargout</span>{1}, <span class="var type0" id="S2T0U267">varargout</span>{2}, <span class="var type0" id="S2T0U270">varargout</span>{3}, <span class="var type0" id="S19T0U272">errStat</span>, <span class="var type0" id="S20T0U273">errStr</span>] = <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,79" id="srcline79"> 79</a></span><span class="line">                usrp_uhd_mapi(<span class="var type0" id="S3T0U276">cmd</span>, <span class="var type0" id="S4T0U278">varargin</span>{:});</span></span>
<span class="srcline"><span class="lineno"><a href="69,80" id="srcline80"> 80</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,81" id="srcline81"> 81</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="69,82" id="srcline82"> 82</a></span><span class="line"><span class="comment">% function is being called in codegen mode</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,83" id="srcline83"> 83</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,84" id="srcline84"> 84</a></span><span class="line">    <span class="comment">% not being found: </span></span></span>
<span class="srcline"><span class="lineno"><a href="69,85" id="srcline85"> 85</a></span><span class="line">    <span class="comment">% eml_allow_enum_inputs;</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,86" id="srcline86"> 86</a></span><span class="line">    <span class="comment">%errStat_i = int32(0);</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,87" id="srcline87"> 87</a></span><span class="line">    <span class="mxinfo " id="T160:U28"><span class="var type1" id="S23T160U283">errStat_i</span> = <span class="mxinfo " id="T160:U30">UsrpErrorCapiEnumT(0)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,88" id="srcline88"> 88</a></span><span class="line">    <span class="mxinfo " id="T234:U31"><span class="var type1" id="S20T234U289">errStr</span>  = <span class="mxinfo " id="T153:U33">char(zeros(1,<span class="var type1" id="S15T2U295">MAX_ERROR_MESSAGE_LENGTH</span>))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,89" id="srcline89"> 89</a></span><span class="line">    coder.varsize(<span class="string">'errStr'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="69,90" id="srcline90"> 90</a></span><span class="line">    <span class="mxinfo " id="T24:U35"><span class="var type1" id="S26T24U304">errStrSize</span> = <span class="mxinfo " id="T24:U37">int32(<span class="mxinfo " id="T2:U38">0</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,91" id="srcline91"> 91</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="69,92" id="srcline92"> 92</a></span><span class="line">    <span class="mxinfo " id="T77:U39"><span class="var type1" id="S28T77U310">cmd_c</span> = <span class="mxinfo " id="T77:U41">[<span class="var type1" id="S3T51U313">cmd</span> <span class="string">'_c'</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,93" id="srcline93"> 93</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="69,94" id="srcline94"> 94</a></span><span class="line">    <span class="keyword">switch</span> (<span class="var type1" id="S3T51U317">cmd</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="69,95" id="srcline95"> 95</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'sdruMexLock'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="69,96" id="srcline96"> 96</a></span><span class="line">             coder.ceval(<span class="string">'mexLock'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="69,97" id="srcline97"> 97</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'sdruMexUnlock'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="69,98" id="srcline98"> 98</a></span><span class="line">             coder.ceval(<span class="string">'mexUnlock'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="69,99" id="srcline99"> 99</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'reportDrivers'</span>, <span class="string">'getSDRuDriverVersion'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="69,100" id="srcline100">100</a></span><span class="line">            <span class="var type0" id="S29T0U345">flatAddrList</span>     = char(zeros(1,<span class="var type0" id="S13T0U351">MAX_STR_SIZE</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="69,101" id="srcline101">101</a></span><span class="line">            coder.varsize(<span class="string">'flatAddrList'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="69,102" id="srcline102">102</a></span><span class="line">            <span class="var type0" id="S30T0U360">flatAddrListSize</span> = int32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="69,103" id="srcline103">103</a></span><span class="line">            coder.ceval(<span class="var type0" id="S28T0U369">cmd_c</span>, coder.ref(<span class="var type0" id="S29T0U374">flatAddrList</span>), coder.wref(<span class="var type0" id="S23T0U379">errStat_i</span>), coder.ref(<span class="var type0" id="S20T0U384">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="69,104" id="srcline104">104</a></span><span class="line">            <span class="var type0" id="S30T0U387">flatAddrListSize</span> = coder.ceval(<span class="string">'strlen'</span>, coder.rref(<span class="var type0" id="S29T0U397">flatAddrList</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="69,105" id="srcline105">105</a></span><span class="line">            assert(<span class="var type0" id="S30T0U402">flatAddrListSize</span> &lt;= <span class="var type0" id="S13T0U403">MAX_STR_SIZE</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="69,106" id="srcline106">106</a></span><span class="line">            <span class="var type0" id="S29T0U406">flatAddrList</span>     = <span class="var type0" id="S29T0U408">flatAddrList</span>(1:<span class="var type0" id="S30T0U411">flatAddrListSize</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="69,107" id="srcline107">107</a></span><span class="line">            <span class="var type0" id="S2T0U415">varargout</span>{1}     = <span class="var type0" id="S29T0U417">flatAddrList</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,108" id="srcline108">108</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="69,109" id="srcline109">109</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'getSDRuList'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="69,110" id="srcline110">110</a></span><span class="line">            <span class="var type0" id="S32T0U424">addr_null</span>= [<span class="var type0" id="S4T0U428">varargin</span>{1} 0];</span></span>
<span class="srcline"><span class="lineno"><a href="69,111" id="srcline111">111</a></span><span class="line">            <span class="var type0" id="S33T0U433">addr_c</span>   = coder.opaque(<span class="string">'char *'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="69,112" id="srcline112">112</a></span><span class="line">            <span class="var type0" id="S33T0U441">addr_c</span>   = coder.ceval(<span class="string">'(char *)'</span>, coder.rref(<span class="var type0" id="S32T0U451">addr_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="69,113" id="srcline113">113</a></span><span class="line">            <span class="var type0" id="S29T0U454">flatAddrList</span>     = char(zeros(1,<span class="var type0" id="S13T0U460">MAX_STR_SIZE</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="69,114" id="srcline114">114</a></span><span class="line">            coder.varsize(<span class="string">'flatAddrList'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="69,115" id="srcline115">115</a></span><span class="line">            <span class="var type0" id="S30T0U469">flatAddrListSize</span> = int32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="69,116" id="srcline116">116</a></span><span class="line">            coder.ceval(<span class="var type0" id="S28T0U478">cmd_c</span>, <span class="var type0" id="S33T0U479">addr_c</span>, coder.ref(<span class="var type0" id="S29T0U484">flatAddrList</span>), coder.wref(<span class="var type0" id="S23T0U489">errStat_i</span>), coder.ref(<span class="var type0" id="S20T0U494">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="69,117" id="srcline117">117</a></span><span class="line">            <span class="var type0" id="S30T0U497">flatAddrListSize</span> = coder.ceval(<span class="string">'strlen'</span>, coder.rref(<span class="var type0" id="S29T0U507">flatAddrList</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="69,118" id="srcline118">118</a></span><span class="line">            assert(<span class="var type0" id="S30T0U512">flatAddrListSize</span> &lt;= <span class="var type0" id="S13T0U513">MAX_STR_SIZE</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="69,119" id="srcline119">119</a></span><span class="line">            <span class="var type0" id="S29T0U516">flatAddrList</span>     = <span class="var type0" id="S29T0U518">flatAddrList</span>(1:<span class="var type0" id="S30T0U521">flatAddrListSize</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="69,120" id="srcline120">120</a></span><span class="line">            <span class="var type0" id="S2T0U525">varargout</span>{1}     = <span class="var type0" id="S29T0U527">flatAddrList</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,121" id="srcline121">121</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="69,122" id="srcline122">122</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'createDriver'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="69,123" id="srcline123">123</a></span><span class="line">            <span class="comment">% NOTE: we expect to treat input strings as uint8 arrays in this</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,124" id="srcline124">124</a></span><span class="line">            <span class="comment">% code.  If we did not, then if the MATLAB char array involved chars</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,125" id="srcline125">125</a></span><span class="line">            <span class="comment">% that took up &gt;1 byte, we'd get an error from the coder mex about</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,126" id="srcline126">126</a></span><span class="line">            <span class="comment">% the array size changing.  ("The conversion from a unicode string</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,127" id="srcline127">127</a></span><span class="line">            <span class="comment">% to a local code page changes the number of characters.  This is </span></span></span>
<span class="srcline"><span class="lineno"><a href="69,128" id="srcline128">128</a></span><span class="line">            <span class="comment">% not supported.") For example, a block name of foo??ball will </span></span></span>
<span class="srcline"><span class="lineno"><a href="69,129" id="srcline129">129</a></span><span class="line">            <span class="comment">% error out.</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,130" id="srcline130">130</a></span><span class="line">            <span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,131" id="srcline131">131</a></span><span class="line">            <span class="comment">% The following code will handle input strings that have been passed</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,132" id="srcline132">132</a></span><span class="line">            <span class="comment">% in as uint8 arrays.  Callers must do the casting.</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,133" id="srcline133">133</a></span><span class="line">            <span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,134" id="srcline134">134</a></span><span class="line">            <span class="var type0" id="S34T0U534">driverApiH</span> = int32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="69,135" id="srcline135">135</a></span><span class="line">            <span class="var type0" id="S32T0U540">addr_null</span>= [<span class="var type0" id="S4T0U544">varargin</span>{1} 0];</span></span>
<span class="srcline"><span class="lineno"><a href="69,136" id="srcline136">136</a></span><span class="line">            <span class="var type0" id="S33T0U549">addr_c</span>   = coder.opaque(<span class="string">'char *'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="69,137" id="srcline137">137</a></span><span class="line">            <span class="var type0" id="S33T0U557">addr_c</span>   = coder.ceval(<span class="string">'(char *)'</span>, coder.rref(<span class="var type0" id="S32T0U567">addr_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="69,138" id="srcline138">138</a></span><span class="line">            <span class="var type0" id="S35T0U570">req_null</span> = [<span class="var type0" id="S4T0U574">varargin</span>{4} 0];</span></span>
<span class="srcline"><span class="lineno"><a href="69,139" id="srcline139">139</a></span><span class="line">            <span class="var type0" id="S36T0U579">req_c</span>    = coder.opaque(<span class="string">'char *'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="69,140" id="srcline140">140</a></span><span class="line">            <span class="var type0" id="S36T0U587">req_c</span>    = coder.ceval(<span class="string">'(char *)'</span>, coder.rref(<span class="var type0" id="S35T0U597">req_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="69,141" id="srcline141">141</a></span><span class="line">            coder.ceval(<span class="var type0" id="S28T0U603">cmd_c</span>, <span class="var type0" id="S33T0U604">addr_c</span>, <span class="var type0" id="S4T0U606">varargin</span>{2}, <span class="var type0" id="S4T0U609">varargin</span>{3}, <span class="var type0" id="S36T0U611">req_c</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,142" id="srcline142">142</a></span><span class="line">                        coder.wref(<span class="var type0" id="S34T0U616">driverApiH</span>), coder.wref(<span class="var type0" id="S23T0U621">errStat_i</span>), coder.ref(<span class="var type0" id="S20T0U626">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="69,143" id="srcline143">143</a></span><span class="line">            <span class="var type0" id="S2T0U630">varargout</span>{1} = <span class="var type0" id="S34T0U632">driverApiH</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,144" id="srcline144">144</a></span><span class="line">            <span class="comment">% Tell coder that addr_null &amp; req_null must be alive and separate throughout the call to cmd_c.</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,145" id="srcline145">145</a></span><span class="line">            coder.ceval(<span class="string">'(void)'</span>, coder.rref(<span class="var type0" id="S32T0U643">addr_null</span>)); </span></span>
<span class="srcline"><span class="lineno"><a href="69,146" id="srcline146">146</a></span><span class="line">            coder.ceval(<span class="string">'(void)'</span>, coder.rref(<span class="var type0" id="S35T0U654">req_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="69,147" id="srcline147">147</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="69,148" id="srcline148">148</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'openDataConnection'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="69,149" id="srcline149">149</a></span><span class="line">            <span class="comment">% varargin   1      2         3          4              5       6         7             8</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,150" id="srcline150">150</a></span><span class="line">            <span class="comment">%           addr, boardId, requester, frameLength, dportType, buffMode, buffSize, masterClockRate</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,151" id="srcline151">151</a></span><span class="line">            <span class="comment">% varargout  1         2         3</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,152" id="srcline152">152</a></span><span class="line">            <span class="comment">%           driverH, errStat, errMsg</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,153" id="srcline153">153</a></span><span class="line">            <span class="var type0" id="S34T0U661">driverApiH</span> = int32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="69,154" id="srcline154">154</a></span><span class="line">            <span class="var type0" id="S32T0U667">addr_null</span>= [<span class="var type0" id="S4T0U671">varargin</span>{1} 0];</span></span>
<span class="srcline"><span class="lineno"><a href="69,155" id="srcline155">155</a></span><span class="line">            <span class="var type0" id="S33T0U676">addr_c</span>   = coder.opaque(<span class="string">'char *'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="69,156" id="srcline156">156</a></span><span class="line">            <span class="var type0" id="S33T0U684">addr_c</span>   = coder.ceval(<span class="string">'(char *)'</span>, coder.rref(<span class="var type0" id="S32T0U694">addr_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="69,157" id="srcline157">157</a></span><span class="line">            <span class="var type0" id="S35T0U697">req_null</span> = [<span class="var type0" id="S4T0U701">varargin</span>{3} 0];</span></span>
<span class="srcline"><span class="lineno"><a href="69,158" id="srcline158">158</a></span><span class="line">            <span class="var type0" id="S36T0U706">req_c</span>    = coder.opaque(<span class="string">'char *'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="69,159" id="srcline159">159</a></span><span class="line">            <span class="var type0" id="S36T0U714">req_c</span>    = coder.ceval(<span class="string">'(char *)'</span>, coder.rref(<span class="var type0" id="S35T0U724">req_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="69,160" id="srcline160">160</a></span><span class="line">            coder.internal.assert(<span class="var type0" id="S4T0U734">varargin</span>{4}&lt;=<span class="var type0" id="S16T0U736">MAX_FRAMELENGTH</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,161" id="srcline161">161</a></span><span class="line">              <span class="string">'sdru:mapiPrivate:invalidFrameLength'</span>, <span class="var type0" id="S16T0U738">MAX_FRAMELENGTH</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="69,162" id="srcline162">162</a></span><span class="line">            <span class="var type0" id="S37T0U741">frameLength</span> = uint32(<span class="var type0" id="S4T0U745">varargin</span>{4});</span></span>
<span class="srcline"><span class="lineno"><a href="69,163" id="srcline163">163</a></span><span class="line">            <span class="var type0" id="S39T0U749">buffSize</span>    = uint32(<span class="var type0" id="S4T0U753">varargin</span>{7});</span></span>
<span class="srcline"><span class="lineno"><a href="69,164" id="srcline164">164</a></span><span class="line">            <span class="var type0" id="S40T0U757">masterClockRate</span> = <span class="var type0" id="S4T0U759">varargin</span>{8};</span></span>
<span class="srcline"><span class="lineno"><a href="69,165" id="srcline165">165</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="69,166" id="srcline166">166</a></span><span class="line">            coder.ceval(<span class="var type0" id="S28T0U766">cmd_c</span>, <span class="var type0" id="S33T0U767">addr_c</span>, <span class="var type0" id="S4T0U769">varargin</span>{2}, <span class="var type0" id="S36T0U771">req_c</span>, <span class="var type0" id="S37T0U772">frameLength</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,167" id="srcline167">167</a></span><span class="line">                        <span class="var type0" id="S4T0U774">varargin</span>{5}, <span class="var type0" id="S4T0U777">varargin</span>{6}, <span class="var type0" id="S39T0U779">buffSize</span>, <span class="var type0" id="S40T0U780">masterClockRate</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,168" id="srcline168">168</a></span><span class="line">                        coder.wref(<span class="var type0" id="S34T0U785">driverApiH</span>), coder.wref(<span class="var type0" id="S23T0U790">errStat_i</span>), coder.ref(<span class="var type0" id="S20T0U795">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="69,169" id="srcline169">169</a></span><span class="line">            <span class="var type0" id="S2T0U799">varargout</span>{1} = <span class="var type0" id="S34T0U801">driverApiH</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,170" id="srcline170">170</a></span><span class="line">            <span class="comment">% Tell coder that addr_null &amp; req_null must be alive and separate throughout the call to cmd_c.</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,171" id="srcline171">171</a></span><span class="line">            coder.ceval(<span class="string">'(void)'</span>, coder.rref(<span class="var type0" id="S32T0U812">addr_null</span>)); </span></span>
<span class="srcline"><span class="lineno"><a href="69,172" id="srcline172">172</a></span><span class="line">            coder.ceval(<span class="string">'(void)'</span>, coder.rref(<span class="var type0" id="S35T0U823">req_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="69,173" id="srcline173">173</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="69,174" id="srcline174">174</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'deleteDriver'</span>, <span class="string">'setClockConfig'</span>, <span class="string">'closeDataConnection'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="69,175" id="srcline175">175</a></span><span class="line">            coder.ceval(<span class="var type1" id="S28T77U835">cmd_c</span>, <span class="var type1" id="S4T12U837">varargin</span>{:}, coder.wref(<span class="var type1" id="S23T160U843">errStat_i</span>), coder.ref(<span class="mxinfo " id="T69:U47"><span class="var type1" id="S20T69U848">errStr</span></span>));</span></span>
<span class="srcline"><span class="lineno"><a href="69,176" id="srcline176">176</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="69,177" id="srcline177">177</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'checkSDRHostName'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="69,178" id="srcline178">178</a></span><span class="line">            <span class="var type0" id="S32T0U855">addr_null</span>= [<span class="var type0" id="S4T0U859">varargin</span>{1} 0];</span></span>
<span class="srcline"><span class="lineno"><a href="69,179" id="srcline179">179</a></span><span class="line">            <span class="var type0" id="S33T0U864">addr_c</span>   = coder.opaque(<span class="string">'char *'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="69,180" id="srcline180">180</a></span><span class="line">            <span class="var type0" id="S33T0U872">addr_c</span>   = coder.ceval(<span class="string">'(char *)'</span>, coder.rref(<span class="var type0" id="S32T0U882">addr_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="69,181" id="srcline181">181</a></span><span class="line">            coder.ceval(<span class="var type0" id="S28T0U888">cmd_c</span>, <span class="var type0" id="S33T0U889">addr_c</span>, coder.wref(<span class="var type0" id="S23T0U894">errStat_i</span>), coder.ref(<span class="var type0" id="S20T0U899">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="69,182" id="srcline182">182</a></span><span class="line">            <span class="comment">% Tell coder that addr_null  must be alive throughout the call to cmd_c.</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,183" id="srcline183">183</a></span><span class="line">            coder.ceval(<span class="string">'(void)'</span>, coder.rref(<span class="var type0" id="S32T0U910">addr_null</span>)); </span></span>
<span class="srcline"><span class="lineno"><a href="69,184" id="srcline184">184</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="69,185" id="srcline185">185</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'getDeviceDescription'</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,186" id="srcline186">186</a></span><span class="line">            <span class="var type0" id="S41T0U915">descStr</span> = char(zeros(1,<span class="var type0" id="S14T0U921">MAX_DEV_DESCR_STR_SIZE</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="69,187" id="srcline187">187</a></span><span class="line">            coder.varsize(<span class="string">'descStr'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="69,188" id="srcline188">188</a></span><span class="line">            <span class="var type0" id="S42T0U930">descStrSize</span> = int32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="69,189" id="srcline189">189</a></span><span class="line">            coder.ceval(<span class="var type0" id="S28T0U939">cmd_c</span>, <span class="var type0" id="S4T0U941">varargin</span>{:}, coder.ref(<span class="var type0" id="S41T0U947">descStr</span>), coder.wref(<span class="var type0" id="S23T0U952">errStat_i</span>), coder.ref(<span class="var type0" id="S20T0U957">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="69,190" id="srcline190">190</a></span><span class="line">            <span class="var type0" id="S42T0U960">descStrSize</span> = coder.ceval(<span class="string">'strlen'</span>, coder.rref(<span class="var type0" id="S41T0U970">descStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="69,191" id="srcline191">191</a></span><span class="line">            assert(<span class="var type0" id="S42T0U975">descStrSize</span> &lt;= <span class="var type0" id="S14T0U976">MAX_DEV_DESCR_STR_SIZE</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="69,192" id="srcline192">192</a></span><span class="line">            <span class="var type0" id="S41T0U979">descStr</span> = <span class="var type0" id="S41T0U981">descStr</span>(1:<span class="var type0" id="S42T0U984">descStrSize</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="69,193" id="srcline193">193</a></span><span class="line">            <span class="var type0" id="S2T0U988">varargout</span>{1} = <span class="var type0" id="S41T0U990">descStr</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,194" id="srcline194">194</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="69,195" id="srcline195">195</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'setClockConfigFull'</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,196" id="srcline196">196</a></span><span class="line">            <span class="var type0" id="S43T0U995">localClockConfig</span> = <span class="var type0" id="S4T0U997">varargin</span>{2};</span></span>
<span class="srcline"><span class="lineno"><a href="69,197" id="srcline197">197</a></span><span class="line">            coder.cstructname(<span class="var type0" id="S43T0U1004">localClockConfig</span>, <span class="string">'ClockConfigCapiT'</span>, <span class="string">'extern'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="69,198" id="srcline198">198</a></span><span class="line">            coder.ceval(<span class="var type0" id="S28T0U1012">cmd_c</span>, <span class="var type0" id="S4T0U1014">varargin</span>{1}, <span class="var type0" id="S43T0U1016">localClockConfig</span>, coder.wref(<span class="var type0" id="S23T0U1021">errStat_i</span>), coder.ref(<span class="var type0" id="S20T0U1026">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="69,199" id="srcline199">199</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="69,200" id="srcline200">200</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'setRate'</span>, <span class="string">'setGain'</span>, <span class="string">'getRate'</span>, <span class="string">'getFrequency'</span>, <span class="string">'getGain'</span>, <span class="string">'setMasterClockRate'</span>, <span class="string">'getMasterClockRate'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="69,201" id="srcline201">201</a></span><span class="line">            <span class="var type0" id="S44T0U1039">actualValue</span> = double(0);</span></span>
<span class="srcline"><span class="lineno"><a href="69,202" id="srcline202">202</a></span><span class="line">            coder.ceval(<span class="var type0" id="S28T0U1048">cmd_c</span>, <span class="var type0" id="S4T0U1050">varargin</span>{:}, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,203" id="srcline203">203</a></span><span class="line">                        coder.wref(<span class="var type0" id="S44T0U1056">actualValue</span>), coder.wref(<span class="var type0" id="S23T0U1061">errStat_i</span>), coder.ref(<span class="var type0" id="S20T0U1066">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="69,204" id="srcline204">204</a></span><span class="line">            <span class="var type0" id="S2T0U1070">varargout</span>{1} = <span class="var type0" id="S44T0U1072">actualValue</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,205" id="srcline205">205</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="69,206" id="srcline206">206</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'setFrequency'</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,207" id="srcline207">207</a></span><span class="line">            <span class="var type0" id="S46T0U1077">tuneResult</span> = TuneResultCapiT();</span></span>
<span class="srcline"><span class="lineno"><a href="69,208" id="srcline208">208</a></span><span class="line">            coder.cstructname(<span class="var type0" id="S46T0U1085">tuneResult</span>, <span class="string">'TuneResultCapiT'</span>, <span class="string">'extern'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="69,209" id="srcline209">209</a></span><span class="line">            coder.ceval(<span class="var type0" id="S28T0U1093">cmd_c</span>, <span class="var type0" id="S4T0U1095">varargin</span>{:}, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,210" id="srcline210">210</a></span><span class="line">                        coder.wref(<span class="var type0" id="S46T0U1101">tuneResult</span>), coder.wref(<span class="var type0" id="S23T0U1106">errStat_i</span>), coder.ref(<span class="var type0" id="S20T0U1111">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="69,211" id="srcline211">211</a></span><span class="line">            <span class="var type0" id="S2T0U1115">varargout</span>{1} = <span class="var type0" id="S46T0U1117">tuneResult</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,212" id="srcline212">212</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="69,213" id="srcline213">213</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'getFrequencyRange'</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,214" id="srcline214">214</a></span><span class="line">            <span class="var type0" id="S48T0U1122">freqRange</span> = FreqRangeCapiT();</span></span>
<span class="srcline"><span class="lineno"><a href="69,215" id="srcline215">215</a></span><span class="line">            coder.cstructname(<span class="var type0" id="S48T0U1130">freqRange</span>, <span class="string">'FreqRangeCapiT'</span>, <span class="string">'extern'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="69,216" id="srcline216">216</a></span><span class="line">            coder.ceval(<span class="var type0" id="S28T0U1138">cmd_c</span>, <span class="var type0" id="S4T0U1140">varargin</span>{:}, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,217" id="srcline217">217</a></span><span class="line">                        coder.wref(<span class="var type0" id="S48T0U1146">freqRange</span>), coder.wref(<span class="var type0" id="S23T0U1151">errStat_i</span>), coder.ref(<span class="var type0" id="S20T0U1156">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="69,218" id="srcline218">218</a></span><span class="line">            <span class="var type0" id="S2T0U1160">varargout</span>{1} = <span class="var type0" id="S48T0U1162">freqRange</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,219" id="srcline219">219</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="69,220" id="srcline220">220</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'getGainRange'</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,221" id="srcline221">221</a></span><span class="line">            <span class="var type0" id="S50T0U1167">gainRange</span> = GainRangeCapiT();</span></span>
<span class="srcline"><span class="lineno"><a href="69,222" id="srcline222">222</a></span><span class="line">            coder.cstructname(<span class="var type0" id="S50T0U1175">gainRange</span>, <span class="string">'GainRangeCapiT'</span>, <span class="string">'extern'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="69,223" id="srcline223">223</a></span><span class="line">            coder.ceval(<span class="var type0" id="S28T0U1183">cmd_c</span>, <span class="var type0" id="S4T0U1185">varargin</span>{:}, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,224" id="srcline224">224</a></span><span class="line">                        coder.wref(<span class="var type0" id="S50T0U1191">gainRange</span>), coder.wref(<span class="var type0" id="S23T0U1196">errStat_i</span>), coder.ref(<span class="var type0" id="S20T0U1201">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="69,225" id="srcline225">225</a></span><span class="line">            <span class="var type0" id="S2T0U1205">varargout</span>{1} = <span class="var type0" id="S50T0U1207">gainRange</span>;           </span></span>
<span class="srcline"><span class="lineno"><a href="69,226" id="srcline226">226</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="69,227" id="srcline227">227</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'receiveData'</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,228" id="srcline228">228</a></span><span class="line">            <span class="comment">% 46336 represents 0.00185344 seconds at 25Msps.  1 ms seems to be a decent</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,229" id="srcline229">229</a></span><span class="line">            <span class="comment">% time interval to interact with the IP stack on a default glnxa64 machine.</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,230" id="srcline230">230</a></span><span class="line">            <span class="comment">% 32768 seems to be the max for UHD(TM) so we may want to change to that.</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,231" id="srcline231">231</a></span><span class="line">            assert(<span class="var type0" id="S4T0U1215">varargin</span>{6}&lt;=<span class="var type0" id="S16T0U1217">MAX_FRAMELENGTH</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="69,232" id="srcline232">232</a></span><span class="line">            <span class="var type0" id="S37T0U1220">frameLength</span> = uint32(<span class="var type0" id="S4T0U1224">varargin</span>{6});</span></span>
<span class="srcline"><span class="lineno"><a href="69,233" id="srcline233">233</a></span><span class="line">            <span class="var type0" id="S52T0U1228">data</span>        = complex(zeros(<span class="var type0" id="S16T0U1233">MAX_FRAMELENGTH</span>, 1, <span class="string">'int16'</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="69,234" id="srcline234">234</a></span><span class="line">            <span class="var type0" id="S54T0U1238">dataLength</span>  = uint32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="69,235" id="srcline235">235</a></span><span class="line">            <span class="var type0" id="S55T0U1244">overflow</span>    = uint32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="69,236" id="srcline236">236</a></span><span class="line">            coder.ceval(<span class="var type0" id="S28T0U1253">cmd_c</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,237" id="srcline237">237</a></span><span class="line">                <span class="var type0" id="S4T0U1255">varargin</span>{1}, <span class="var type0" id="S4T0U1258">varargin</span>{2}, <span class="var type0" id="S4T0U1261">varargin</span>{3}, <span class="var type0" id="S4T0U1264">varargin</span>{4}, <span class="var type0" id="S4T0U1267">varargin</span>{5}, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,238" id="srcline238">238</a></span><span class="line">                coder.wref(<span class="var type0" id="S52T0U1273">data</span>), coder.wref(<span class="var type0" id="S54T0U1278">dataLength</span>), coder.wref(<span class="var type0" id="S55T0U1283">overflow</span>), <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,239" id="srcline239">239</a></span><span class="line">                coder.wref(<span class="var type0" id="S23T0U1288">errStat_i</span>), coder.ref(<span class="var type0" id="S20T0U1293">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="69,240" id="srcline240">240</a></span><span class="line">            <span class="var type0" id="S2T0U1297">varargout</span>{1} = <span class="var type0" id="S52T0U1299">data</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,241" id="srcline241">241</a></span><span class="line">            <span class="var type0" id="S2T0U1303">varargout</span>{2} = <span class="var type0" id="S54T0U1305">dataLength</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,242" id="srcline242">242</a></span><span class="line">            <span class="var type0" id="S2T0U1309">varargout</span>{3} = <span class="var type0" id="S55T0U1311">overflow</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,243" id="srcline243">243</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="69,244" id="srcline244">244</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'sendInt16Data'</span>,  <span class="string">'sendComplexInt16Data'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,245" id="srcline245">245</a></span><span class="line">              <span class="string">'sendSingleData'</span>, <span class="string">'sendComplexSingleData'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,246" id="srcline246">246</a></span><span class="line">              <span class="string">'sendDoubleData'</span>, <span class="string">'sendComplexDoubleData'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="69,247" id="srcline247">247</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="69,248" id="srcline248">248</a></span><span class="line">            assert(<span class="var type0" id="S4T0U1326">varargin</span>{7}&lt;=<span class="var type0" id="S16T0U1328">MAX_FRAMELENGTH</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="69,249" id="srcline249">249</a></span><span class="line">            <span class="var type0" id="S37T0U1331">frameLength</span> = uint32(<span class="var type0" id="S4T0U1335">varargin</span>{7});</span></span>
<span class="srcline"><span class="lineno"><a href="69,250" id="srcline250">250</a></span><span class="line">            <span class="var type0" id="S56T0U1339">underflow</span>   = uint32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="69,251" id="srcline251">251</a></span><span class="line">            coder.ceval(<span class="string">'sendData_c'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,252" id="srcline252">252</a></span><span class="line">                <span class="var type0" id="S4T0U1350">varargin</span>{1}, <span class="var type0" id="S4T0U1353">varargin</span>{2}, <span class="var type0" id="S4T0U1356">varargin</span>{3}, <span class="var type0" id="S4T0U1359">varargin</span>{4}, <span class="var type0" id="S4T0U1362">varargin</span>{5}, <span class="var type0" id="S4T0U1365">varargin</span>{6}, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,253" id="srcline253">253</a></span><span class="line">                coder.wref(<span class="var type0" id="S56T0U1371">underflow</span>), coder.wref(<span class="var type0" id="S23T0U1376">errStat_i</span>), coder.ref(<span class="var type0" id="S20T0U1381">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="69,254" id="srcline254">254</a></span><span class="line">            <span class="var type0" id="S2T0U1385">varargout</span>{1} = <span class="var type0" id="S56T0U1387">underflow</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,255" id="srcline255">255</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="69,256" id="srcline256">256</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'sendInt16Data_x'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="69,257" id="srcline257">257</a></span><span class="line">            assert(<span class="var type0" id="S4T0U1397">varargin</span>{7}&lt;=<span class="var type0" id="S16T0U1399">MAX_FRAMELENGTH</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="69,258" id="srcline258">258</a></span><span class="line">            <span class="var type0" id="S37T0U1402">frameLength</span> = uint32(<span class="var type0" id="S4T0U1406">varargin</span>{7});</span></span>
<span class="srcline"><span class="lineno"><a href="69,259" id="srcline259">259</a></span><span class="line">            <span class="var type0" id="S57T0U1410">dPortDType</span>  = DataPortDataTypeCapiEnumT.DPortDTypeInt16;</span></span>
<span class="srcline"><span class="lineno"><a href="69,260" id="srcline260">260</a></span><span class="line">            <span class="var type0" id="S56T0U1416">underflow</span>   = uint32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="69,261" id="srcline261">261</a></span><span class="line">            coder.ceval(<span class="string">'sendData_c'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,262" id="srcline262">262</a></span><span class="line">                <span class="var type0" id="S4T0U1427">varargin</span>{1}, <span class="var type0" id="S4T0U1430">varargin</span>{2}, <span class="var type0" id="S4T0U1433">varargin</span>{3}, <span class="var type0" id="S4T0U1436">varargin</span>{4}, <span class="var type0" id="S4T0U1439">varargin</span>{5}, <span class="var type0" id="S4T0U1442">varargin</span>{6}, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,263" id="srcline263">263</a></span><span class="line">                coder.wref(<span class="var type0" id="S56T0U1448">underflow</span>), coder.wref(<span class="var type0" id="S23T0U1453">errStat_i</span>), coder.ref(<span class="var type0" id="S20T0U1458">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="69,264" id="srcline264">264</a></span><span class="line">            <span class="var type0" id="S2T0U1462">varargout</span>{1} = <span class="var type0" id="S56T0U1464">underflow</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,265" id="srcline265">265</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,266" id="srcline266">266</a></span><span class="line">    <span class="comment">%errStat = UsrpErrorCapiEnumT(errStat_i);</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,267" id="srcline267">267</a></span><span class="line">    <span class="mxinfo " id="T160:U49"><span class="var type1" id="S19T160U1467">errStat</span>     = <span class="var type1" id="S23T160U1468">errStat_i</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,268" id="srcline268">268</a></span><span class="line">    <span class="mxinfo " id="T24:U52"><span class="var type1" id="S26T24U1471">errStrSize</span>  = <span class="mxinfo " id="T24:U54">coder.ceval(<span class="string">'strlen'</span>, coder.rref(<span class="mxinfo " id="T69:U55"><span class="var type1" id="S20T69U1481">errStr</span></span>))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,269" id="srcline269">269</a></span><span class="line">    <span class="mxinfo " id="T11:U57"><span class="extrinsicFcn" id="F481N37:B1484">assert</span>(<span class="mxinfo " id="T1:U58"><span class="var type1" id="S26T24U1486">errStrSize</span> &lt;= <span class="mxinfo " id="T2:U60"><span class="var type1" id="S15T2U1487">MAX_ERROR_MESSAGE_LENGTH</span></span></span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,270" id="srcline270">270</a></span><span class="line">    <span class="mxinfo " id="T234:U62"><span class="var type1" id="S20T234U1490">errStr</span>      = <span class="mxinfo " id="T234:U64"><span class="var type1" id="S20T234U1492">errStr</span>(<span class="mxinfo " id="T24:U66">1</span>:<span class="var type1" id="S26T24U1495">errStrSize</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,271" id="srcline271">271</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,272" id="srcline272">272</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="69,273" id="srcline273">273</a></span><span class="line"><span class="keyword">switch</span> (<span class="var type1" id="S3T51U1498">cmd</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="69,274" id="srcline274">274</a></span><span class="line">    <span class="keyword">case</span> {<span class="string">'deleteDriver'</span>, <span class="string">'setClockConfig'</span>, <span class="string">'setClockConfigFull'</span>, <span class="string">'closeDataConnection'</span>, <span class="string">'checkSDRHostName'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="69,275" id="srcline275">275</a></span><span class="line">        <span class="mxinfo " id="T160:U69"><span class="mxinfo " id="T160:U70"><span class="var type1" id="S2T17U1510">varargout</span>{1}</span> = <span class="var type1" id="S19T160U1512">errStat</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,276" id="srcline276">276</a></span><span class="line">        <span class="mxinfo " id="T234:U73"><span class="mxinfo " id="T234:U74"><span class="var type1" id="S2T17U1516">varargout</span>{2}</span> = <span class="var type1" id="S20T234U1518">errStr</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,277" id="srcline277">277</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="69,278" id="srcline278">278</a></span><span class="line">    <span class="keyword">case</span> {<span class="string">'getSDRuList'</span>, <span class="string">'reportDrivers'</span>, <span class="string">'createDriver'</span>, <span class="string">'getDeviceDescription'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,279" id="srcline279">279</a></span><span class="line">          <span class="string">'setRate'</span>, <span class="string">'setFrequency'</span>, <span class="string">'setGain'</span>, <span class="string">'getRate'</span>, <span class="string">'getFrequency'</span>, <span class="string">'getGain'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,280" id="srcline280">280</a></span><span class="line">          <span class="string">'setMasterClockRate'</span>, <span class="string">'getMasterClockRate'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,281" id="srcline281">281</a></span><span class="line">          <span class="string">'getFrequencyRange'</span>, <span class="string">'getGainRange'</span>, <span class="string">'openDataConnection'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,282" id="srcline282">282</a></span><span class="line">          <span class="string">'sendInt16Data'</span>,  <span class="string">'sendComplexInt16Data'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,283" id="srcline283">283</a></span><span class="line">          <span class="string">'sendSingleData'</span>, <span class="string">'sendComplexSingleData'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,284" id="srcline284">284</a></span><span class="line">          <span class="string">'sendDoubleData'</span>, <span class="string">'sendComplexDoubleData'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,285" id="srcline285">285</a></span><span class="line">          <span class="string">'sendInt16Data_x'</span>, <span class="string">'getSDRuDriverVersion'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="69,286" id="srcline286">286</a></span><span class="line">        <span class="var type0" id="S2T0U1548">varargout</span>{2} = <span class="var type0" id="S19T0U1550">errStat</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,287" id="srcline287">287</a></span><span class="line">        <span class="var type0" id="S2T0U1554">varargout</span>{3} = <span class="var type0" id="S20T0U1556">errStr</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,288" id="srcline288">288</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="69,289" id="srcline289">289</a></span><span class="line">    <span class="keyword">case</span> <span class="string">'receiveData'</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,290" id="srcline290">290</a></span><span class="line">        <span class="var type0" id="S2T0U1562">varargout</span>{4} = <span class="var type0" id="S19T0U1564">errStat</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,291" id="srcline291">291</a></span><span class="line">        <span class="var type0" id="S2T0U1568">varargout</span>{5} = <span class="var type0" id="S20T0U1570">errStr</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="69,292" id="srcline292">292</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="69,293" id="srcline293">293</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="69,294" id="srcline294">294</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
